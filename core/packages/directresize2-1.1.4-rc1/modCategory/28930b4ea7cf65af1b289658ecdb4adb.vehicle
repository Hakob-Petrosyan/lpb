<?php return array (
  'unique_key' => 'category',
  'preserve_keys' => false,
  'update_object' => true,
  'related_objects' => 
  array (
    'Plugins' => 
    array (
      '0614c3bb6e6667371a000028409985b5' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'related_objects' => 
        array (
          'PluginEvents' => 
          array (
            'dc2fbda58c072e480a175d49b75e8363' => 
            array (
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnWebPagePrerender","priority":0,"propertyset":0}',
              'guid' => 'c5e0e8b3c60b8d55642939e1cd17a836',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnWebPagePrerender',
              ),
              'signature' => '049668c06c70c4ff47bac839e6338328',
            ),
          ),
        ),
        'related_object_attributes' => 
        array (
          'PluginEvents' => 
          array (
            'preserve_keys' => true,
            'update_object' => false,
            'unique_key' => 
            array (
              0 => 'pluginid',
              1 => 'event',
            ),
          ),
        ),
        'class' => 'modPlugin',
        'object' => '{"id":1,"source":0,"property_preprocess":0,"name":"DirectResize2","description":"New version of great plugin for expand pictures similar to Lightbox. The following viewers can be selected Highslide, Colorbox and prettyPhoto.","editor_type":0,"category":0,"cache_type":0,"plugincode":"\\/**\\n * DirectResize2 Plugin\\n \\n * Author: Stepan Prishepenko (Setest) <itman116@gmail.com>\\n \\n * Version: 1.1.4 (17.04.2013) Added new parameters in all lightboxes(min_width,min_height)\\n * Version: 1.1.3 (17.04.2013) Fixed a bug check of imagesize\\n * Version: 1.1.2 (16.04.2013) Fixed a bugs in parser html5 and html4 documents, fix css style, add FancyBox2 lightbox\\n * Version: 1.0.2 (14.04.2013) Fixed a bugs in js and css paths, fix parameter style (colorbox part) in set of parameters.\\n * Version: 1.0.1 (09.04.2013) Fixed a bugs in processing exception parameters\\n * Version: 1.0.0 (08.04.2013) It`s must correctly work in ModX {REVO} 2.2 - 2.2.6\\n \\n * Events: OnWebPagePrerender\\n * Required: PhpThumbOf snippet for resizing images\\n\\n * Based on: DirectResize by Adrian Cherry <github.com\\/apcherry\\/directresize>\\n\\n   Description:   \\n\\t\\tA modx revo plugin to apply the a selected image expander to any \\n\\t\\timages in modx Revo. The available packages are available for selection \\n\\t\\tvia the plugin properties.\\n\\n\\t\\t* Highslide\\n\\t\\t* Colorbox\\n\\t\\t* prettyPhoto\\n *\\/\\n \\n\\n\\/\\/ if ($modx->user->get(\'id\')!=1) {return;}\\n$e = &$modx->event;\\n\\/\\/ \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c \\u043d\\u0443\\u0436\\u043d\\u043e\\u0435 \\u0441\\u043e\\u0431\\u044b\\u0442\\u0438\\u0435\\nif ($e->name != \'OnWebPagePrerender\') {return;}\\n\\n$log = $modx->getOption(\'log\', $scriptProperties,false);\\n\\/\\/ if ($modx->user->get(\'id\')!=1) {$log=false;}\\n\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/--=LOG=--\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\nclass log{\\n\\tfunction __construct($modx,$debug) {\\n\\t\\t$this->modx = &$modx;\\n\\t\\t$this->debug = $debug; \\/\\/ \\u043f\\u0440\\u0438\\u043d\\u0438\\u043c\\u0430\\u0435\\u0442 true,false\\n\\t\\tif ($this->debug){\\n\\t\\t\\t$logFileName = $this->modx->event->activePlugin;\\n\\t\\t\\t$this->modx->setLogLevel(modX::LOG_LEVEL_INFO);\\n\\t\\t\\t\\t$date = date(\'Y-m-d____H-i-s\');  \\/\\/ \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u0432 \\u0432\\u044b\\u0432\\u043e\\u0434\\u0435 \\u0434\\u0430\\u0442\\u044b : - \\u043d\\u0435\\u043b\\u044c\\u0437\\u044f, \\u0438\\u043d\\u0430\\u0447\\u0435 \\u043d\\u0435 \\u0441\\u043e\\u0437\\u0434\\u0430\\u0435\\u0442\\u0441\\u044f \\u043b\\u043e\\u0433 \\u0432 \\u0444\\u0430\\u0439\\u043b\\n\\t\\t\\t\\t$this->modx->setLogTarget(array(\\n\\t\\t\\t\\t   \\/\\/ \'target\' => \'ECHO\',\\n\\t\\t\\t\\t   \'target\' => \'FILE\',\\n\\t\\t\\t\\t   \'options\' => array(\'filename\' => \\"{$logFileName}_$date.log\\")\\t\\t\\t\\t   \\n\\t\\t\\t));\\t\\t\\n\\t\\t} \\n\\t}\\n\\tfunction write($info){\\n\\t\\tif (!$this->debug){return;}\\n\\t\\t$this->modx->log(modX::LOG_LEVEL_INFO, $info);\\n\\t}\\n}\\n$log=new log($modx,$log);\\t\\n\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/--=LOG=--\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\n\\/\\/ $log->write(777); return;\\n\\n\\/\\/ $modx->lexicon->load(\'directresize2:properties\');\\n\\n\\/\\/ $path = $modx->getOption(\'cache_path\',$scriptProperties,\'assets\\/components\\/directresize2\\/cache\');\\n\\n$thumb_key = $modx->getOption(\'thumb_key\',$scriptProperties,\'\'); \\/\\/ this parameter add in the filename of thumbnail\\n$thumbnail_dir = $modx->getOption(\'thumbnail_dir\', $scriptProperties);\\n$thumbnail_dir = str_replace(\'\\/\\/\', \'\\/\', $thumbnail_dir);\\n$thumbnail_dir = str_replace(array(\\"..\\",\\".\\"), \\"\\", $thumbnail_dir);\\nif (empty($thumbnail_dir)) return;\\n\\n$config_default_thumb_param = $modx->getOption(\'thumb_param\', $scriptProperties, \\"\\n\'zc\'=1,\'bg\'=\'#fff\',\'q\'=80\\");\\n\\/\\/ \'w\'=200,\'h\'=150,\'zc\'=1,\'bg\'=\'#fff\',\'q\'=70\\");\\n$config_default_thumb_param = str_replace(array(\\"\'\\",\\" \\"),\\"\\",$config_default_thumb_param);\\n\\n\\n\\/\\/ $r = $modx->getOption(\'method\',$scriptProperties,0);\\n\\/\\/ $q_jpg = $modx->getOption(\'jpg_quality\',$scriptProperties,85);\\n\\/\\/ $q_png = $modx->getOption(\'png_quality\',$scriptProperties,8);\\n\\n$default_thumb_path = $modx->getOption(\'default_thumb_path\',$scriptProperties,null); \\/\\/ assets\\/images\\/thumbs\\n\\n\\/\\/ if enabled then insert special JS for lighbox \\n$insert_expander = $modx->getOption(\'insert_expander\',$scriptProperties,true);\\n\\/\\/ if enabled then insert JS code of components such as: jquery.js, colorbox.js etc.\\n$insert_expander_js = $modx->getOption(\'insert_expander_js\',$scriptProperties,true);\\n\\/\\/ if enabled then insert CSS code of components such as: colorbox.css, highslide.css etc.\\n$insert_expander_css = $modx->getOption(\'insert_expander_css\',$scriptProperties,true);\\n\\/\\/ rewrite thubmnail image if it exist, you can off it to add speed this plugin\\n$rewrite_image_on_exist = $modx->getOption(\'rewrite_image_on_exist\',$scriptProperties,false);\\n\\n\\/*===================--THUMBNAIL PARAMETERS--====================*\\/\\n\\/\\/ $lightbox = $modx->getOption(\'enable\',$scriptProperties,true);\\n$expander = $modx->getOption(\'expander\',$scriptProperties,\'highslide\');\\n$lightbox_w = $modx->getOption(\'max_width\',$scriptProperties,800);\\n$lightbox_h = $modx->getOption(\'max_height\',$scriptProperties,600);\\n\\n$lightbox_w_min = $modx->getOption(\'min_width\',$scriptProperties,100);\\n$lightbox_h_min = $modx->getOption(\'min_height\',$scriptProperties,100);\\n\\n\\n$slideshow = ($modx->getOption(\'slideshow\',$scriptProperties,false))? \'true\' : \'false\';\\n$duration = $modx->getOption(\'slide_duration\',$scriptProperties,2500);\\n$opacity = number_format($modx->getOption(\'opacity\',$scriptProperties,50)\\/100,2);\\n\\n\\/\\/ FancyBox2\\n$fb2_closeClick = $modx->getOption(\'fb2_closeClick\',$scriptProperties,true);\\n$fb2_closeClick = $fb2_closeClick ? \'true\' : \'false\';\\n\\n$fb2_closeEffect = $modx->getOption(\'fb2_closeEffect\',$scriptProperties,\'elastic\');\\n$fb2_openEffect = $modx->getOption(\'fb2_openEffect\',$scriptProperties,\'elastic\');\\n$fb2_openSpeed = $modx->getOption(\'fb2_openSpeed\',$scriptProperties,150);\\n$fb2_closeSpeed = $modx->getOption(\'fb2_closeSpeed\',$scriptProperties,150);\\n$fb2_padding = $modx->getOption(\'fb2_padding\',$scriptProperties,0);\\n$fb2_autoPlay = $modx->getOption(\'fb2_autoPlay\',$scriptProperties,false);\\n$fb2_autoPlay = $fb2_autoPlay ? \'true\' : \'false\';\\n\\n$fb2_playSpeed = $modx->getOption(\'fb2_playSpeed\',$scriptProperties,3000);\\n\\n\\n\\/\\/ Highslide\\n$captionPosition = $modx->getOption(\'caption_position\',$scriptProperties,\'below\');\\n$hs_captionEval = $modx->getOption(\'caption_source\',$scriptProperties,\'this.thumb.alt\');\\n$largeCaption = $modx->getOption(\'large_caption\',$scriptProperties,120);\\n$hs_outlineType = $modx->getOption(\'outline_type\',$scriptProperties,\'rounded-white\');\\n$hs_credit = $modx->getOption(\'hs_credit\',$scriptProperties,\'Highslide JS\');\\n\\/\\/ Colorbox\\n$cb_style = $modx->getOption(\'style\',$scriptProperties,\'style1\');\\nif (empty($cb_style)) $cb_style=\'style1\';\\n$cb_transition = $modx->getOption(\'transition\',$scriptProperties,\'elastic\');\\n\\/\\/ PrettyPhoto\\n$pp_theme = $modx->getOption(\'theme\',$scriptProperties,\'pp_default\');\\n\\n\\/*===================--EXCLUDE--====================*\\/\\n$templates = $modx->getOption(\'templates\', $scriptProperties, \'\');\\n$exclude_templates = $modx->getOption(\'exclude_templates\', $scriptProperties, \'\');\\n$exclude_dirs = $modx->getOption(\'exclude_dirs\', $scriptProperties, null);\\t\\/\\/ \\u043f\\u0430\\u043f\\u043a\\u0438 \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d\\u0438\\u044f\\nif ($exclude_dirs) $exclude_dirs=explode(\\",\\",$exclude_dirs);\\n\\n$exclude_dirs_suffix = $modx->getOption(\'exclude_dirs_suffix\', $scriptProperties, \\"{ExChild}\\");\\t\\/\\/ \\u0441\\u0443\\u0444\\u0444\\u0438\\u043a\\u0441 \\u043f\\u0430\\u043f\\u043a\\u0438 \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d\\u0438\\u044f, \\u043f\\u0440\\u0438 \\u043d\\u0430\\u043b\\u0438\\u0447\\u0438\\u0438, \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0433\\u043e \\u0434\\u043e\\u0447\\u0435\\u0440\\u043d\\u0438\\u0435 \\u043f\\u0430\\u043f\\u043a\\u0438 \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0430\\u044e\\u0442\\u0441\\u044f\\n$exclude_dirs_children = $modx->getOption(\'exclude_dirs_children\', $scriptProperties, null);\\t\\/\\/ \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0430\\u0442\\u044c \\u043b\\u0438 \\u0434\\u043e\\u0447\\u0435\\u0440\\u043d\\u0438\\u0435 \\u0434\\u0438\\u0440\\u0435\\u043a\\u0442\\u043e\\u0440\\u0438\\u0438?\\n$exclude_text_in_elements = $modx->getOption(\'exclude_text_in_elements\', $scriptProperties, \\"noresize\\");\\t\\/\\/ \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0430\\u0435\\u0442 \\u0438\\u0437 \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u043a\\u0438 \\u0438\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0435 \\u0441\\u043e\\u0434\\u0435\\u0440\\u0436\\u0430\\u0442 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0439 \\u0442\\u0435\\u043a\\u0441\\u0442 \\u0432 \\u044d\\u043b\\u0435\\u043c\\u0435\\u043d\\u0442\\u0430\\u0445 alt, class, id, tittle\\n$exclude_extensions = $modx->getOption(\'exclude_extensions\', $scriptProperties, null);\\t\\/\\/ \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0430\\u0435\\u043c \\u0444\\u0430\\u0439\\u043b\\u044b \\u0441 \\u0440\\u0430\\u0448\\u0438\\u0440\\u0435\\u043d\\u0438\\u0435\\u043c ... \\u0441\\u043e\\u0434\\u0435\\u0440\\u0436\\u0430\\u0449\\u0438\\u0435\\u0441\\u044f \\u0432 exclude_extensions, \\u043f\\u0435\\u0440\\u0435\\u0447\\u0438\\u0441\\u043b\\u0435\\u043d\\u043d\\u044b\\u0435 \\u0447\\u0435\\u0440\\u0435\\u0437 \\u0437\\u0430\\u043f\\u044f\\u0442\\u0443\\u044e\\n\\n\\/\\/ \\u043f\\u043e\\u0434\\u043a\\u043b\\u044e\\u0447\\u0430\\u0435\\u043c \\u0441\\u043e\\u0431\\u0441\\u0442\\u0432\\u0435\\u043d\\u043d\\u0443\\u044e \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u044e \\u0443\\u043c\\u0435\\u043d\\u044c\\u0448\\u0435\\u043d\\u0438\\u044f \\u043a\\u0430\\u0440\\u0442\\u0438\\u043d\\u043e\\u043a\\n\\/\\/ require_once MODX_CORE_PATH.\'components\\/directresize2\\/elements\\/plugins\\/plugin.directresize.php\';\\n\\/\\/ \\u043f\\u043e\\u0434\\u043a\\u043b\\u044e\\u0447\\u0430\\u0435\\u043c phpthumb\\nrequire_once MODX_CORE_PATH.\'model\\/phpthumb\\/phpthumb.class.php\';\\n\\n$o = &$modx->resource->_output; \\/\\/ get a reference to the output\\n$cur_output = $modx->resource->get(\'content\');\\n$foundImage = false; \\/\\/ if no image found then don\'t insert javascript\\n\\n\\/\\/ working only in templates\\n$cur_param_res_template = $modx->resource->get(\'template\');\\nif (!empty($templates) and $cur_param_res_template and !in_array($cur_param_res_template, explode(\',\', str_replace(\\" \\",\\"\\",$templates)))){\\n\\t\\/\\/ \\u0435\\u0441\\u043b\\u0438 \\u0434\\u043e\\u043a\\u0443\\u043c\\u0435\\u043d\\u0442 \\u043d\\u0435 \\u043f\\u043e\\u043f\\u0430\\u0434\\u0430\\u0435\\u0442 \\u0432 \\u0448\\u0430\\u0431\\u043b\\u043e\\u043d \\u0442\\u043e \\u0438\\u0437\\u043c\\u0435\\u043d\\u0435\\u043d\\u0438\\u044f \\u043d\\u0435 \\u043f\\u0440\\u043e\\u0438\\u0432\\u043e\\u0434\\u044f\\u0442\\u0441\\u044f\\n\\t\\/\\/ in_array($cur_param_res_template, explode(\',\', $templates))\\n\\treturn;\\n}\\t\\n\\n\\/\\/ exclude templates\\nif (!empty($exclude_templates) and $cur_param_res_template and in_array($cur_param_res_template, explode(\',\', str_replace(\\" \\",\\"\\",$exclude_templates)))){\\n\\t\\/\\/ \\u0435\\u0441\\u043b\\u0438 \\u0434\\u043e\\u043a\\u0443\\u043c\\u0435\\u043d\\u0442 \\u043f\\u043e\\u043f\\u0430\\u0434\\u0430\\u0435\\u0442 \\u0432 \\u0448\\u0430\\u0431\\u043b\\u043e\\u043d \\u0442\\u043e \\u0438\\u0437\\u043c\\u0435\\u043d\\u0435\\u043d\\u0438\\u044f \\u043d\\u0435 \\u043f\\u0440\\u043e\\u0438\\u0432\\u043e\\u0434\\u044f\\u0442\\u0441\\u044f\\n\\treturn;\\n}\\t\\n\\n$output_dom=new DOMDocument();\\n\\n\\/\\/ \\u0440\\u0430\\u0431\\u043e\\u0447\\u0438\\u0439 \\u0432\\u0430\\u0440\\u0438\\u0430\\u043d\\u0442, \\u043d\\u043e \\u043f\\u0440\\u0438 \\u043d\\u0435\\u043c \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u044f asXml() \\u0432\\u043e\\u0437\\u0432\\u0440\\u0430\\u0449\\u0430\\u0435\\u0442 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0432 ASCII\\n\\/\\/ \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0435 \\u043d\\u0438\\u043a\\u0430\\u043a \\u043d\\u0435 \\u0445\\u043e\\u0442\\u044f\\u0442 \\u043a\\u043e\\u043d\\u0432\\u0435\\u0440\\u0442\\u0438\\u0440\\u043e\\u0432\\u0430\\u0442\\u044c\\u0441\\u044f \\u0432 \\u0440\\u043e\\u0434\\u043d\\u0443\\u044e \\u043a\\u043e\\u0434\\u0438\\u0440\\u043e\\u0432\\u043a\\u0443\\n\\/\\/ $output_dom->loadHTML(\'xml encoding=\\"UTF-8\\">\' . $cur_output);\\n\\n$charset=$modx->getOption(\'modx_charset\');\\nif (!$charset) $charset=\\"UTF-8\\";\\n$cur_output=\\"<html>\\n <head>\\n    <meta http-equiv=\'content-type\' content=\'text\\/html; charset={$charset}\'>\\n  <\\/head>\\n<body>{$cur_output}<\\/body>\\n<\\/html>\\";\\n$output_dom->loadHTML($cur_output);\\n\\n\\n$xml=simplexml_import_dom($output_dom); \\/\\/ just to make xpath more simple\\n$images=$xml->xpath(\'\\/\\/img\');\\n\\/\\/ print_r($images);\\n\\nif (!function_exists(\'css_parse\')) {\\n\\tfunction css_parse($styles){\\n\\t\\t\\/\\/ parse css and get all the key:value pair styles\\n\\t\\t$css_array = array(); \\/\\/ master array to hold all values\\n\\t\\tif (isset($styles) and $styles = explode(\';\', strtolower($styles)) and !empty($styles)){\\n\\t\\t\\tforeach ($styles as $style) {\\n\\t\\t\\t\\t$value = explode(\':\', $style);\\n\\t\\t\\t\\t\\/\\/ build the master css array\\n\\t\\t\\t\\tif (!empty($value[0]))\\t$css_array[$value[0]] = $value[1];\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\treturn $css_array;\\n\\t}\\n}\\n\\/\\/ \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u044f \\u0440\\u0430\\u0437\\u0431\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0441\\u0442\\u0440\\u043e\\u043a\\u0443 \\u0432\\u0438\\u0434\\u0430 \\"\'param1\'=\'value1\',...\\" \\u0438 \\u0432\\u043e\\u0437\\u0432\\u0440\\u0430\\u0449\\u0430\\u0435\\u0442 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432\\nif (!function_exists(\'getconfigparam\')) {\\n\\t\\/\\/ function getconfigparam($config_default_param, $type){\\n\\tfunction getconfigparam($config_default_param){\\n\\t\\tforeach (explode(\\",\\",$config_default_param) as $parametr) {\\n\\t\\t\\t$param_arr=explode(\\"=\\",$parametr);\\n\\t\\t\\t\\t\\/\\/ $param[$type][$param_arr[0]]=$param_arr[1];\\n\\t\\t\\t\\t$param[$param_arr[0]]=$param_arr[1];\\n\\t\\t}\\n\\t\\treturn $param;\\n\\t}\\n}\\n\\n$count_imgs=0;\\n\\nif (!empty($images)) {\\n\\t\\/\\/ get version modx\\n\\t$log->write(\\"ModX version:\\".$modx->getOption(\'settings_version\'));\\n\\t\\/\\/ \\u043f\\u0440\\u0438\\u0432\\u043e\\u0434\\u0438\\u043c \\u043a \\u043e\\u0431\\u0449\\u0435\\u043c\\u0443 \\u0432\\u0438\\u0434\\u0443 \\u0432\\u0441\\u0435 img\\n\\t$o = preg_replace(\'\\/<img\\\\s+(([a-z]+=\\".*?\\")+\\\\s*)>\\/\' , \\"<img $1 \\/>\\", $o);\\n}\\nif (strpos(\\"<!DOCTYPE html>\\")) $html5=true; \\/\\/ \\u0432 \\u0441\\u0432\\u044f\\u0437\\u0438 \\u0441 \\u0440\\u0430\\u0437\\u043b\\u0438\\u0447\\u043d\\u043e\\u0439 \\u043e\\u0431\\u0440\\u0430\\u0431\\u043e\\u0442\\u043a\\u043e\\u0439 \\u0442\\u0435\\u0433\\u043e\\u0432 \\u0432 html4 \\u0438 5 \\u0432\\u0435\\u0440\\u0441\\u0438\\u0438\\n\\/\\/ \\u0445\\u043e\\u0442\\u044f \\u043c\\u043e\\u0436\\u043d\\u043e \\u043f\\u043e\\u0438\\u0433\\u0440\\u0430\\u0442\\u044c\\u0441\\u044f \\u0438 \\u0441 normalizeDocument()\\n\\nforeach ($images as $imgs) {\\n\\t$imgstring = $imgs->asXML(); \\/\\/ \\u0442\\u0430\\u043a \\u043a\\u0430\\u043a \\u043f\\u0440\\u0438 \\u044d\\u0442\\u043e\\u043c \\u0432\\u043e\\u0437\\u0432\\u0440\\u0430\\u0442\\u0435 \\u0443 \\u043d\\u0430\\u0441 \\u043f\\u0440\\u043e\\u0438\\u0441\\u0445\\u043e\\u0434\\u0438\\u0442 \\u0437\\u0430\\u043c\\u0435\\u043d\\u0430 \\" \\/>\\" \\u043d\\u0430 \\"\\/>\\" \\u0442\\u043e \\u043d\\u0430\\u043c \\u043d\\u0443\\u0436\\u043d\\u043e \\u0432\\u0435\\u0440\\u043d\\u0443\\u0442\\u044c \\u044d\\u0442\\u043e\\u0442 \\u043f\\u0440\\u043e\\u0431\\u0435\\u043b \\u0438\\u043d\\u0430\\u0447\\u0435 \\u043c\\u044b \\u043d\\u0435 \\u043f\\u043e\\u043b\\u0443\\u0447\\u0438\\u043c \\u0437\\u0430\\u043c\\u0435\\u043d\\u0443 \\u0432 \\u0438\\u0442\\u043e\\u0433\\u0435\\n\\tif ($html5==true) {\\n\\t\\t$imgstring=str_replace(array(\' \\/>\',\'\\/>\'), \'>\', $imgstring);\\n\\t}\\n\\telse {\\n\\t\\t$imgstring=str_replace(\'\\/>\', \' \\/>\', $imgstring);\\n\\t}\\n\\n\\t$path_img  = $imgs[\'src\'];   \\n\\t$id        = $imgs[\'id\'];\\n\\t$alt       = $imgs[\'alt\'];\\n\\t$title     = $imgs[\'title\'];\\n\\t\\/\\/ $class     = explode(\\" \\",$imgs[\'class\']);\\n\\t$class     = $imgs[\'class\']; \\/*Fix by Setest 2013-04-09*\\/\\n\\t\\n\\t$path_img = urldecode($path_img); \\/\\/ Fix by Fi1osof\\n\\t\\/\\/ $path_img = $path_img; \\/\\/ Fix by Fi1osof\\n\\t$log->write(print_r($path_img,true));\\n\\t\\n\\tif (file_exists($path_img)) {\\n\\t\\t\\/\\/ echo \\"|\\".substr($path_img,0,strlen($path_base)).\\"|\\".PHP_EOL;\\n\\t\\t\\/\\/ echo \\"$path_img\\".PHP_EOL;\\n\\t\\t\\/\\/ echo \\"$path_base\\".PHP_EOL;\\n\\t\\t\\/\\/ echo \\"=====\\".PHP_EOL;\\n\\t\\t$count_imgs++;\\n\\t\\t$log->write(\\"==========---IMG \\u2116{$count_imgs}---==========\\");\\n\\t\\tif (strpos(\\"{$id} {$alt} {$title} {$class}\\",$exclude_text_in_elements)!== false){\\n\\t\\t\\t$log->write(\\"Exclude image: $path_img, because \'id\', \'class\', \'title\' or \'id\' is contains \'$exclude_text_in_elements\'\\");\\n\\t\\t\\tcontinue;\\n\\t\\t}\\n\\n\\t\\t\\n\\t\\t$img_dir=dirname($path_img);\\n\\t\\t$path_img_full = MODX_BASE_PATH.$path_img;\\n\\/\\/ echo \\"@@@$path_img_full@@@\\";\\n\\t\\t$img_name = pathinfo($path_img, PATHINFO_FILENAME);\\n\\t\\t$ext = pathinfo($path_img, PATHINFO_EXTENSION);\\t\\n\\t\\t\\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043a\\u043e\\u043d\\u0444\\u0438\\u0433\\u0443\\u0440\\u0430\\u0446\\u0438\\u044e \\u043f\\u043e \\u0443\\u043c\\u043e\\u043b\\u0447\\u0430\\u043d\\u0438\\u044e\\n\\t\\t$config_default = getconfigparam($config_default_thumb_param);\\t\\n\\n\\t\\t\\/\\/ \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d\\u0438\\u0435 \\u0440\\u0430\\u0441\\u0448\\u0438\\u0440\\u0435\\u043d\\u0438\\u0435 \\u0444\\u0430\\u0439\\u043b\\u0430 exclude_extensions\\n\\t\\t\\/*Fix by Setest 2013-04-09*\\/\\n\\t\\tif ($exclude_extensions and $exclude_extensions=str_replace(\' \', \'\', $exclude_extensions) and ($exclude_extensions=explode(\\",\\",$exclude_extensions)) and (in_array($ext, $exclude_extensions))){\\n\\t\\t\\t$log->write(\\"except extension of file ({$ext}), return;\\");\\n\\t\\t\\tcontinue;\\t\\n\\t\\t}\\n\\t\\t\\n\\t\\t\\/\\/ \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c \\u043d\\u0430 \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d\\u0438\\u044f \\u0434\\u0438\\u0440\\u0435\\u043a\\u0442\\u043e\\u0440\\u0438\\u0438\\n\\t\\t\\/\\/ if ($exclude_dirs and $exclude_dirs=str_replace(\' \', \'\', $exclude_dirs) and (in_array($cur_dir,explode(\\",\\",$exclude_dirs)))){\\n\\t\\t$excl=false;\\n\\t\\tif ($exclude_dirs){\\n\\t\\t\\t\\/\\/ $log->write(\\"EXCL\\");\\n\\t\\t\\t\\/\\/ return;\\n\\t\\t\\tif ($exclude_dirs_children) {\\n\\t\\t\\t\\n\\t\\t\\t\\tforeach ($exclude_dirs as $path) {\\n\\t\\t\\t\\t\\t\\tif (strpos($img_dir, $path) !== false) \\/\\/return;\\n\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t$log->write(\\"except children, return;\\");\\n\\t\\t\\t\\t\\t\\t\\t$excl=true; break;\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\tforeach ($exclude_dirs as $path) { \\n\\t\\t\\t\\t\\t$log->write(\\"EXCLUDE DIRS CONDITIONS: curdir ($img_dir), exclude dir ($path)\\");\\n\\t\\t\\t\\t\\t\\/*Fix by Setest 2013-04-09*\\/\\n\\t\\t\\t\\t\\t\\/\\/ \\u0442\\u0430\\u043a \\u043a\\u0430\\u043a \\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044c \\u043c\\u043e\\u0436\\u0435\\u0442 \\u0443\\u043a\\u0430\\u0437\\u0430\\u0442\\u044c \\u043f\\u0430\\u043f\\u043a\\u0443 \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d\\u0438\\u044f \\u0432 \\u0434\\u0432\\u0443\\u0445 \\u0432\\u0438\\u0434\\u0430\\u0445 \\u043a \\u043f\\u0440\\u0438\\u043c\\u0435\\u0440\\u0443:\\n\\t\\t\\t\\t\\t\\/\\/ images\\/{ExChild} \\u0438\\u043b\\u0438 images{ExChild}, \\u0442\\u043e \\u043d\\u0443\\u0436\\u043d\\u043e \\u044d\\u0442\\u043e \\u0443\\u0447\\u0435\\u0441\\u0442\\u044c\\n\\t\\t\\t\\t\\tif ((strpos($path, $exclude_dirs_suffix) !== false) && (\\n\\t\\t\\t\\t\\t\\tstrpos($img_dir, substr($path,0,-1*(strlen($exclude_dirs_suffix)))) !== false\\n\\t\\t\\t\\t\\t\\tor\\n\\t\\t\\t\\t\\t\\tstrpos($img_dir, substr($path,0,-1*((strlen($exclude_dirs_suffix))+1))) !== false\\n\\t\\t\\t\\t\\t)) {\\n\\t\\t\\t\\t\\t\\t\\/\\/ \\u0435\\u0441\\u043b\\u0438 \\u0441\\u043e\\u0434\\u0435\\u0440\\u0436\\u0438\\u0442 \\u0432 \\u0441\\u0442\\u0440\\u043e\\u043a\\u0435 &ExChild\\n\\t\\t\\t\\t\\t\\t$log->write(\\"except {$exclude_dirs_suffix} in: {$path}, return;\\");\\n\\t\\t\\t\\t\\t\\t$excl=true; break;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t\\tif ($img_dir==str_replace($exclude_dirs_suffix, \'\', $path)) {\\n\\t\\t\\t\\t\\t\\t\\t$log->write(\\"except dir, return;\\");\\n\\t\\t\\t\\t\\t\\t\\t$excl=true; break;\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\/\\/ return $modx->error->failure(\\"\\u0417\\u0430\\u043f\\u0438\\u0441\\u0430\\u0442\\u044c \\u0432 \\u0434\\u0430\\u043d\\u043d\\u0443\\u044e \\u0434\\u0438\\u0440\\u0435\\u043a\\u0442\\u043e\\u0440\\u0438\\u044e \\u043d\\u0435\\u043b\\u044c\\u0437\\u044f \\u043e\\u043d\\u0430 \\u043d\\u0430\\u0445\\u043e\\u0434\\u0438\\u0442\\u0441\\u044f \\u0432 \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d\\u0438\\u044f\\u0445 \\u043f\\u043b\\u0430\\u0433\\u0438\\u043d\\u0430\\");\\n\\t\\t\\t\\t\\/\\/ return $modx->error->failure(\\"parent\\");\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\tif ($excl==true) continue;\\n\\n\\n\\t\\t\\/\\/ \\u0434\\u043b\\u044f \\u043e\\u043f\\u0440\\u0435\\u0434\\u0435\\u043b\\u0435\\u043d\\u0438\\u044f \\u0440\\u0435\\u0430\\u043b\\u044c\\u043d\\u043e\\u0433\\u043e \\u043f\\u0443\\u0442\\u0438 \\u0434\\u0430\\u0431\\u044b \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0438\\u0442\\u044c \\u043a\\u0430\\u0440\\u0442\\u0438\\u043d\\u043a\\u0438 \\u0438\\u0437 \\u0432\\u0435\\u0431\\u0430 realpath\\n\\t\\t\\/\\/ dirname(__FILE__); basename pathinfo\\n\\t\\t\\/\\/ $img = strtolower($imgstring);\\n\\t\\t$verif_balise = sizeof(explode(\\"width\\",$imgstring)) + sizeof(explode(\\"height\\",$imgstring)) - 2;\\n\\t\\t\\n\\t\\tif (empty($verif_balise)) continue; \\/\\/ \\u0435\\u0441\\u043b\\u0438 \\u043d\\u0435\\u0442 \\u0448\\u0438\\u0440\\u0438\\u043d\\u044b \\u0438\\u043b\\u0438 \\u0432\\u044b\\u0441\\u043e\\u0442\\u044b \\u0438\\u0433\\u043d\\u043e\\u0440\\u0438\\u0440\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\/\\/ \\u0432\\u0435\\u0434\\u044c \\u044d\\u0442\\u0438 \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u044b \\u0437\\u0430\\u0447\\u0430\\u0441\\u0442\\u0443\\u044e \\u043f\\u043e\\u044f\\u0432\\u043b\\u044f\\u044e\\u0442\\u0441\\u044f \\u043f\\u0440\\u0438 \\u0438\\u0437\\u043c\\u0435\\u043d\\u0435\\u043d\\u0438\\u0438 \\u0432\\u044b\\u0441\\u043e\\u0442\\u044b \\u0438 \\u0448\\u0438\\u0440\\u0438\\u043d\\u044b\\n\\n\\t\\t$height=(int)$imgs[\'height\'];\\n\\t\\t$width=(int)$imgs[\'width\'];\\n\\t\\t\\/\\/ $log->write(\\"before: $height - $width\\");\\n\\t\\t\\/\\/ get size from style if it exist\\n\\t\\tif ($style=css_parse($imgs[\'style\'])) {\\n\\t\\t\\tif \\t((int)$style[\'height\']>0) $height=(int)str_replace(\'px\',\\"\\",$style[\'height\']);\\n\\t\\t\\tif \\t((int)$style[\'width\']>0)  $width=(int)str_replace(\'px\',\\"\\",$style[\'width\']);\\n\\t\\t}\\n\\t\\t$log->write(\\"image tag size: $width(w) - $height(h)\\");\\n\\t\\t\\n\\t\\t\\/\\/ check if the real size bigger than in HTML then create thubnail\\n\\t\\t$real_size_of_img = getimagesize($path_img_full);\\n\\t\\t$img_src_w  = (int)$real_size_of_img[0];\\n\\t\\t$img_src_h  = (int)$real_size_of_img[1];\\n\\t\\t$log->write(\\"realsize: \\".$real_size_of_img[0].\\" - \\".$real_size_of_img[1]);\\n\\t\\t$log->write(\\"realsize_array: \\".print_r($real_size_of_img,true));\\n\\t\\t\\n\\t\\tif ($img_src_w <= $width || $img_src_h <= $height) {continue;}\\n\\t\\t\\n\\t\\t$foundImage = true; \\/\\/ if needed to add ligtbox to image\\n\\n\\t\\t$thumb_dir = MODX_BASE_PATH.$img_dir.\\"\\/\\".$thumbnail_dir.\\"\\/\\";\\n\\t\\tif ($default_thumb_path) {\\n\\t\\t\\tif (substr($default_thumb_path, -1, 1)!=\\"\\/\\") $default_thumb_path.=\\"\\/\\";\\n\\t\\t\\t$thumb_dir = MODX_BASE_PATH.$default_thumb_path;\\n\\t\\t}\\n\\t\\t$log->write(\\"Thumbnail full path: {$thumb_dir}\\");\\n\\t\\tif(!is_dir($thumb_dir)) {\\n\\t\\t\\t$log->write(\\"Thumbnail dir not exist\\");\\n\\t\\t\\tif (!mkdir($thumb_dir,0755)){\\n\\t\\t\\t\\t$log->write(\\"Thumbnail error:\\".$modx->lexicon(\'dirres_error_createdir\'));\\n\\t\\t\\t\\t\\/\\/ return $modx->error->failure($modx->lexicon(\'dirres_error_createdir\'));\\n\\t\\t\\t}\\n\\t\\t\\telse{\\n\\t\\t\\t\\t$log->write(\\"Thumbnail dir created successfull\\");\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$log->write(\\"Thumbnail dir already exist\\");\\n\\t\\t}\\n\\t\\t\\/\\/ $filename = $thumb_dir.$name;\\n\\t\\t$imgName = \\"{$thumb_dir}{$img_name}{$thumb_key}_w{$width}_h{$height}.{$ext}\\";\\n\\t\\t\\n\\t\\tif ($rewrite_image_on_exist or !file_exists($imgName)) {\\n\\t\\t\\t\\/\\/ old method\\n\\t\\t\\t\\/\\/ $imgName = directResize($path_img,$path,$thumb_key,$width,$height,$r,$q_jpg,$q_png);\\n\\n\\t\\t\\t\\/\\/ new method\\n\\t\\t\\t\\/\\/ \\u0441\\u043e\\u0437\\u0434\\u0430\\u0435\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 phpThumb..\\n\\t\\t\\t$phpThumb = new phpThumb();\\n\\t\\t\\t$phpThumb->setSourceFilename($path_img_full);\\n\\t\\t\\tif (empty($config_default[\'f\'])){\\n\\t\\t\\t\\t$config_default[\'f\']=$ext; \\/\\/ \\u0431\\u0435\\u0437 \\u044d\\u0442\\u043e\\u0433\\u043e \\u043c\\u044b \\u043d\\u0435 \\u0443\\u0432\\u0438\\u0434\\u0438\\u043c \\u043f\\u0440\\u043e\\u0437\\u0440\\u0430\\u0447\\u043d\\u043e\\u0441\\u0442\\u0438 \\u0432 png \\u0438 gif\\n\\t\\t\\t}\\n\\t\\t\\tif (!empty($config_default)){\\n\\t\\t\\t\\t$config_default[\'h\']=$height;\\n\\t\\t\\t\\t$config_default[\'w\']=$width;\\n\\t\\t\\t\\t$log->write(\\"setParameter:  {$config_default_thumb_param}\\");\\n\\t\\t\\t\\t$log->write(\\"itogParameter: \\".implode(\\", \\",$config_default));\\n\\t\\t\\t\\tforeach ($config_default as $k => $v) {\\n\\t\\t\\t\\t\\t$phpThumb->setParameter($k, $v);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t   \\n\\t\\t\\t\\/\\/ \\u0433\\u0435\\u043d\\u0435\\u0440\\u0438\\u0440\\u0443\\u0435\\u043c \\u0444\\u0430\\u0439\\u043b\\n\\t\\t\\tif ($phpThumb->GenerateThumbnail()) {\\n\\t\\t\\t\\t$log->write(\\"GenerateThumbnail - OK\\");\\n\\t\\t\\t\\tif ($phpThumb->RenderToFile($imgName)) {\\n\\t\\t\\t\\t\\t$log->write(\\"RenderToFile - OK\\");\\n\\t\\t\\t\\t\\t\\/\\/ \\u0443\\u0441\\u0442\\u0430\\u043d\\u0430\\u0432\\u043b\\u0438\\u0432\\u0430\\u0435\\u043c \\u043f\\u0440\\u0430\\u0432\\u0430 \\u043d\\u0430 \\u0444\\u0430\\u0439\\u043b, \\u044d\\u0442\\u043e \\u043e\\u043f\\u0446\\u0438\\u043e\\u043d\\u0430\\u043b\\u044c\\u043d\\u043e, \\u0437\\u0430\\u0432\\u0438\\u0441\\u0438\\u0442 \\u043e\\u0442 \\u0441\\u0435\\u0440\\u0432\\u0435\\u0440\\u0430\\n\\t\\t\\t\\t\\tchmod($imgName, 0666);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t$log->write(\\"Error: RenderToFile: $imgName\\");\\n\\t\\t\\t\\t\\tcontinue;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\t$log->write(\\"Error: GenerateThumbnail\\");\\n\\t\\t\\t\\tcontinue;\\n\\t\\t\\t}\\t\\t\\n\\t\\t}\\n\\t\\t\\/\\/ \\u0432\\u043e\\u0437\\u0432\\u0440\\u0430\\u0449\\u0430\\u0435\\u043c \\u043d\\u043e\\u0440\\u043c\\u0430\\u043b\\u044c\\u043d\\u044b\\u0439 \\u043f\\u0443\\u0442\\u044c \\u043a \\u0444\\u0430\\u0439\\u043b\\u0443 \\u0447\\u0442\\u043e\\u0431\\u044b \\u043c\\u043e\\u0436\\u043d\\u043e \\u0431\\u044b\\u043b\\u043e \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0442\\u044c \\u0435\\u0433\\u043e \\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044e\\n\\t\\t$imgName=str_replace(MODX_BASE_PATH, \'\', $imgName);\\n\\t\\t$log->write(\\"Itog thumb filename: $imgName\\");\\n\\t\\t\\/\\/-------------------\\n\\t\\t\\/\\/ \\u0432 \\u044d\\u0442\\u043e\\u0439 \\u0441\\u0442\\u0440\\u043e\\u043a\\u0435 \\u043f\\u0440\\u043e\\u0438\\u0441\\u0445\\u043e\\u0434\\u0438\\u0442 \\u0437\\u0430\\u043c\\u0435\\u043d\\u0430 \\u043d\\u0430\\u0447\\u0438\\u043d\\u043a\\u0438 src \\u043d\\u0430 \\u043d\\u043e\\u0432\\u0443\\u044e \\u0443\\u0436\\u0430\\u0442\\u0443\\u044e \\u043a\\u0430\\u0440\\u0442\\u0438\\u043d\\u043a\\u0443\\n\\t\\t\\/\\/ $new_link = $path_g[0].$pathRedim.$path_d[0];\\n\\t\\t$log->write(\\"Replace string in output: \\n\\t\\t\\tsearch:  {$path_img}\\n\\t\\t\\treplace: {$imgName}\\n\\t\\t\\tsubject: {$imgstring}\\n\\t\\t\\");\\n\\t\\t\\n\\t\\t$new_link = str_replace($path_img,$imgName,$imgstring);\\n\\n\\t\\t###############################\\n\\t\\t\\/\\/ \\u043d\\u0435\\u043f\\u043e\\u043d\\u044f\\u0442\\u043d\\u0430\\u044f \\u0441\\u0442\\u0440\\u043e\\u043a\\u0430 \\u0440\\u0430\\u0437\\u043e\\u0431\\u0440\\u0430\\u0442\\u044c\\u0441\\u044f \\u0438 \\u0447\\u0442\\u043e \\u0437\\u0430 verif_light\\n\\t\\t\\/\\/ preg_match(\\"\\/directresize2\\/\\",strtolower($imgstring),$verif_light);\\n\\t\\t\\/\\/ if ($lightbox == 1 && $verif_light[0] == \\"directresize\\") {\\n\\t\\t\\/\\/ if ($lightbox) {\\n\\t\\t\\/\\/ create the expanded image legend from the title and alt tags, for colorbox and prettyPhoto\\n\\t\\t$log->write(\\"Create the legend for $expander\\");\\n\\n\\t\\tif ($alt <> \\"\\" || $title <> \\"\\") {\\n\\t\\t\\t$legende = \\" title=\\\\\\"$alt\\";\\n\\t\\t\\tif ($alt <> \\"\\" && $title <> \\"\\") $legende .= \\"<br \\/>\\";\\n\\t\\t\\tif ($title <> \\"\\") $legende .= \\"<span style=\'font-weight:normal; font-size: 9px\'>$title<\\/span>\\";\\n\\t\\t\\t$legende .= \\"\\\\\\" \\";\\n\\t\\t} else {\\n\\t\\t\\t$legende = \\"\\";\\n\\t\\t}\\n\\t\\t\\/\\/ work out if the caption is large enough to go into the right hand panel\\n\\t\\tif ($largeCaption > 0 && ( strlen($title) > $largeCaption || strlen($alt) > $largeCaption )) {\\n\\t\\t\\t$override = \', { captionOverlay: { position: \\\\\'rightpanel\\\\\', width: \\\\\'250px\\\\\' } }\';\\n\\t\\t} else {\\n\\t\\t\\t$override = \'\';\\n\\t\\t}\\n\\n\\t\\t\\n\\t\\t\\/\\/ select which expander to apply to the graphical element\\n\\t\\tswitch ($expander) {\\n\\t\\t\\tcase \\"fancybox2\\" :\\n\\t\\t\\t\\t$group=\\"\\";\\tif ($fb2_autoPlay==\'true\') $group=\\"rel=\'group\'\\";\\n\\t\\t\\t\\t$new_link = \\"<a class=\'fancybox2\' {$group} \\".$legende.\\" href=\'\\".$path_img.\\"\' >\\".$new_link.\\"<\\/a>\\";\\n\\t\\t\\t\\tbreak;\\t\\t\\n\\t\\t\\tcase \\"colorbox\\" :\\n\\t\\t\\t\\t$new_link = \\"<a class=\'colorbox cboxElement\' \\".$legende.\\" href=\'\\".$path_img.\\"\' >\\".$new_link.\\"<\\/a>\\";\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\tcase \\"prettyphoto\\" :\\n\\t\\t\\t\\t$new_link = \\"<a rel=\'prettyPhoto[[pp_gal]]\' \\".$legende.\\" href=\'\\".$path_img.\\"\' >\\".$new_link.\\"<\\/a>\\";\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\tdefault : \\/\\/use highslide as the default\\n\\t\\t\\t\\t$new_link = \\"<a class=\'highslide\' onclick=\\\\\\"return hs.expand(this\\".$override.\\")\\\\\\" href=\'\\".$path_img.\\"\' >\\".$new_link.\\"<\\/a>\\";\\n\\t\\t}\\n\\t\\t\\/\\/ } \\/\\/ end lightbox highslide test\\n\\t\\t$log->write(\\"Replace in output:\\n\\t\\t\\tImageString: {$imgstring}\\n\\t\\t\\tNewLink:     {$new_link}\\n\\t\\t\\");\\n\\n\\t\\t$o = str_replace($imgstring,$new_link,$o);\\n\\t} \\/\\/ end path_base test\\n} \\/\\/ end for loop\\n\\n\\/\\/ only add style sheet and javascript if there is an image to resize\\nif ( $insert_expander and $foundImage ) {\\n\\t\\/\\/ select which expander style sheet and java script is required\\n\\tswitch ($expander) {\\n\\t\\tcase \\"fancybox2\\" :\\n\\t\\t\\t$drStyle = \\"\\n\\t\\t\\t\\t<link rel=\'stylesheet\' type=\'text\\/css\' href=\'assets\\/components\\/directresize2\\/fancybox2\\/jquery.fancybox.css?v=2.1.4\' media=\'screen\' \\/>\\\\n\\n\\t\\t\\t\\t<link rel=\'stylesheet\' type=\'text\\/css\' href=\'assets\\/components\\/directresize2\\/fancybox2\\/helpers\\/jquery.fancybox-buttons.css?v=1.0.5\' media=\'screen\' \\/>\\\\n\\n\\t\\t\\t\\t<link rel=\'stylesheet\' type=\'text\\/css\' href=\'assets\\/components\\/directresize2\\/fancybox2\\/helpers\\/jquery.fancybox-thumbs.css?v=1.0.7\' \\/>\\\\n\\n\\t\\t\\t\\";\\n\\t\\t\\t$jsCall =  \\"\\n\\t\\t\\t\\t<script type=\'text\\/javascript\' src=\'http:\\/\\/ajax.googleapis.com\\/ajax\\/libs\\/jquery\\/1.9.0\\/jquery.min.js\'><\\/script>\\n\\t\\t\\t\\t<script type=\'text\\/javascript\' src=\'assets\\/components\\/directresize2\\/fancybox2\\/jquery.mousewheel-3.0.6.pack.js\'><\\/script>\\n\\t\\t\\t\\t<script type=\'text\\/javascript\' src=\'assets\\/components\\/directresize2\\/fancybox2\\/jquery.fancybox.pack.js?v=2.1.4\'><\\/script>\\n\\t\\t\\t\\t<script type=\'text\\/javascript\' src=\'assets\\/components\\/directresize2\\/fancybox2\\/helpers\\/jquery.fancybox-buttons.js?v=1.0.5\'><\\/script>\\n\\t\\t\\t\\t<script type=\'text\\/javascript\' src=\'assets\\/components\\/directresize2\\/fancybox2\\/helpers\\/jquery.fancybox-thumbs.js?v=1.0.7\'><\\/script>\\n\\t\\t\\t\\t<script type=\'text\\/javascript\' src=\'assets\\/components\\/directresize2\\/fancybox2\\/helpers\\/jquery.fancybox-media.js?v=1.0.5\'><\\/script>\\n\\t\\t\\t\\";\\n\\t\\t\\t$js \\t=  \\"<script>\\n\\t\\t\\t\\t\\t\\t\\tjQuery(\'a.fancybox2\').fancybox({\\n\\t\\t\\t\\t\\t\\t\\t\\tpadding: {$fb2_padding},\\n\\n\\t\\t\\t\\t\\t\\t\\t\\tminWidth: {$lightbox_w_min},\\n\\t\\t\\t\\t\\t\\t\\t\\tminHeight: {$lightbox_h_min},\\n\\n\\t\\t\\t\\t\\t\\t\\t\\tmaxWidth: {$lightbox_w},\\n\\t\\t\\t\\t\\t\\t\\t\\tmaxHeight: {$lightbox_h},\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\tautoPlay: {$fb2_autoPlay},\\n\\t\\t\\t\\t\\t\\t\\t\\tplaySpeed: {$fb2_playSpeed},\\n\\n\\t\\t\\t\\t\\t\\t\\t\\topenEffect : \'{$fb2_openEffect}\',\\n\\t\\t\\t\\t\\t\\t\\t\\topenSpeed  : {$fb2_openSpeed},\\n\\n\\t\\t\\t\\t\\t\\t\\t\\tcloseEffect : \'{$fb2_closeEffect}\',\\n\\t\\t\\t\\t\\t\\t\\t\\tcloseSpeed  : {$fb2_closeSpeed},\\n\\n\\t\\t\\t\\t\\t\\t\\t\\tcloseClick : {$fb2_closeClick},\\n\\n\\t\\t\\t\\t\\t\\t\\t\\thelpers : {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\toverlay : null\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t<\\/script>\\\\n\\";\\n\\t\\tbreak;\\t\\n\\t\\tcase \\"colorbox\\" :\\n\\t\\t\\t$drStyle = \\"<link rel=\'stylesheet\' type=\'text\\/css\' href=\'assets\\/components\\/directresize2\\/colorbox\\/\\".$cb_style.\\"\\/colorbox.css\' \\/>\\\\n\\";\\n\\t\\t\\t$jsCall =  \\"<script type=\'text\\/javascript\' src=\'http:\\/\\/ajax.googleapis.com\\/ajax\\/libs\\/jquery\\/1.7.1\\/jquery.min.js\'><\\/script>\\n\\t\\t\\t\\t\\t\\t<script type=\'text\\/javascript\' src=\'assets\\/components\\/directresize2\\/js\\/jquery.colorbox-min.js\'><\\/script>\\";\\n\\t\\t\\t$js \\t=  \\"<script>\\n\\t\\t\\t\\t\\t\\t\\tjQuery(\'a.colorbox\').colorbox({\\n\\t\\t\\t\\t\\t\\t\\t\\trel:\'colorbox\',\\n\\t\\t\\t\\t\\t\\t\\t\\topacity:\\".$opacity.\\",\\n\\t\\t\\t\\t\\t\\t\\t\\ttransition:\'\\".$cb_transition.\\"\',\\n\\t\\t\\t\\t\\t\\t\\t\\tslideshow:\\".$slideshow.\\",\\n\\t\\t\\t\\t\\t\\t\\t\\tslideshowSpeed:\\".$duration.\\",\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\tinitialWidth: {$lightbox_w_min},\\n\\t\\t\\t\\t\\t\\t\\t\\tinitialHeight: {$lightbox_h_min},\\n\\n\\t\\t\\t\\t\\t\\t\\t\\tmaxWidth:\\".$lightbox_w.\\",\\n\\t\\t\\t\\t\\t\\t\\t\\tmaxHeight:\\".$lightbox_w.\\"});\\n\\t\\t\\t\\t\\t\\t<\\/script>\\\\n\\";\\n\\t\\tbreak;\\n\\n\\t\\tcase \\"prettyphoto\\" :\\n\\t\\t\\t$drStyle = \\"<link rel=\'stylesheet\' type=\'text\\/css\' href=\'assets\\/components\\/directresize2\\/css\\/prettyPhoto.css\' \\/>\\\\n\\";\\n\\t\\t\\t$jsCall  = \\"<script type=\'text\\/javascript\' src=\'http:\\/\\/ajax.googleapis.com\\/ajax\\/libs\\/jquery\\/1.7.1\\/jquery.min.js\'><\\/script>\\n\\t\\t\\t\\t\\t\\t<script type=\'text\\/javascript\'src=\'assets\\/components\\/directresize2\\/js\\/jquery.prettyPhoto.js\'><\\/script>\\";\\n\\t\\t\\t$js\\t\\t = \\"<script>\\n\\t\\t\\t\\t\\t\\t\\t$(document).ready(function(){\\n\\t\\t\\t\\t\\t\\t\\t$(\\\\\\"a[rel^=\'prettyPhoto\']\\\\\\").prettyPhoto({\\n\\t\\t\\t\\t\\t\\t\\t\\ttheme:\'\\".$pp_theme.\\"\',\\n\\t\\t\\t\\t\\t\\t\\t\\tdefault_width: {$lightbox_w},\\n\\t\\t\\t\\t\\t\\t\\t\\tdefault_height: {$lightbox_w},\\n\\t\\t\\t\\t\\t\\t\\t\\topacity:\\".$opacity.\\",\\n\\t\\t\\t\\t\\t\\t\\t\\tautoplay_slideshow:\\".$slideshow.\\",\\n\\t\\t\\t\\t\\t\\t\\t\\tslideshow:\\".$duration.\\"\\n\\t\\t\\t\\t\\t\\t\\t});});\\n\\t\\t\\t\\t\\t\\t<\\/script>\\\\n\\";\\n\\t\\tbreak;\\n\\t\\t\\n\\t\\tdefault :\\/\\/ default to highslide settings\\n\\t\\t\\t$drStyle = \\"<link rel=\'stylesheet\' type=\'text\\/css\' href=\'assets\\/components\\/directresize2\\/highslide\\/highslide.css\' \\/>\\\\n\\";\\n\\t\\t\\t$jsCall  = \\"<script type=\'text\\/javascript\' src=\'assets\\/components\\/directresize2\\/js\\/highslide-with-gallery.min.js\'><\\/script>\\";\\n\\t\\t\\t$js\\t\\t = \\"<script type=\'text\\/javascript\'>\\n\\t\\t\\t\\t\\t\\t\\ths.graphicsDir = \'assets\\/components\\/directresize2\\/highslide\\/graphics\\/\'; \\/\\/ path to the graphical elements of highslide\\n\\t\\t\\t\\t\\t\\t\\ths.outlineType = \'\\".$hs_outlineType.\\"\';\\n\\t\\t\\t\\t\\t\\t\\ths.captionEval = \'\\".$hs_captionEval.\\"\';\\n\\t\\t\\t\\t\\t\\t\\ths.captionOverlay.position = \'\\".$captionPosition.\\"\';\\n\\t\\t\\t\\t\\t\\t\\ths.dimmingOpacity = \\".$opacity.\\";\\n\\t\\t\\t\\t\\t\\t\\ths.numberPosition = \'caption\';\\n\\t\\t\\t\\t\\t\\t\\ths.lang.number = \'Image %1 of %2\';\\n\\t\\t\\t\\t\\t\\t\\ths.minWidth = {$lightbox_w_min};\\n\\t\\t\\t\\t\\t\\t\\ths.minHeight = {$lightbox_h_min};\\n\\t\\t\\t\\t\\t\\t\\ths.maxWidth = \'\\".$lightbox_w.\\"\';\\n\\t\\t\\t\\t\\t\\t\\ths.maxHeight = \'\\".$lightbox_h.\\"\';\\n\\t\\t\\t\\t\\t\\t\\ths.lang.creditsText = \'\\".$hs_credit.\\"\';\\n\\t\\t\\t\\t\\t\\t<\\/script>\\\\n\\";\\n\\t\\t\\tif ( $slideshow == \'true\' ) {\\n\\t\\t\\t\\t$js = $js.\\"\\n\\t\\t\\t\\t\\t\\t<script type=\'text\\/javascript\'>\\n\\t\\t\\t\\t\\t\\t\\ths.addSlideshow({\\n\\t\\t\\t\\t\\t\\t\\t\\tinterval: \\".$duration.\\",\\n\\t\\t\\t\\t\\t\\t\\t\\trepeat: false,\\n\\t\\t\\t\\t\\t\\t\\t\\tuseControls: true,\\n\\t\\t\\t\\t\\t\\t\\t\\tfixedControls: true,\\n\\t\\t\\t\\t\\t\\t\\t\\toverlayOptions: {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\topacity: \\".$opacity.\\",\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tposition: \'top center\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\thideOnMouseOut: true,\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t<\\/script>\\\\n\\";\\n\\t\\t\\t}\\n\\t\\tbreak;\\n\\t}\\n\\t\\n\\tif ($insert_expander_css){\\n\\t\\t$log->write(\\"Insert expander css\\");\\n\\n\\t\\t\\/\\/ add the style sheet to the head of the html file\\n\\t\\t$o = preg_replace(\'~(<\\/head>)~i\', $drStyle . \'\\\\1\', $o);\\n\\t}\\n\\tif ($insert_expander_js){ $js=$jsCall.$js;}\\n\\t$log->write(\\"Insert expander JS\\"); \\n\\t\\/\\/ add the javascript to the bottom of the page \\n\\t$o = preg_replace(\'~(<\\/body>)~i\', $js . \'\\\\1\', $o);\\n\\t\\n}\\nreturn;","locked":0,"properties":"a:39:{s:3:\\"log\\";a:7:{s:4:\\"name\\";s:3:\\"log\\";s:4:\\"desc\\";s:11:\\"dirres2_log\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"opacity\\";a:7:{s:4:\\"name\\";s:7:\\"opacity\\";s:4:\\"desc\\";s:15:\\"dirres2_opacity\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:2:\\"40\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"slide_duration\\";a:7:{s:4:\\"name\\";s:14:\\"slide_duration\\";s:4:\\"desc\\";s:22:\\"dirres2_slide_duration\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:4:\\"5000\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"exclude_dirs\\";a:7:{s:4:\\"name\\";s:12:\\"exclude_dirs\\";s:4:\\"desc\\";s:20:\\"dirres2_exclude_dirs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:53:\\"assets\\/images\\/banners\\/,assets\\/images\\/aliens\\/{ExChild}\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:18:\\"Exclusion settings\\";}s:21:\\"exclude_dirs_children\\";a:7:{s:4:\\"name\\";s:21:\\"exclude_dirs_children\\";s:4:\\"desc\\";s:29:\\"dirres2_exclude_dirs_children\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:18:\\"Exclusion settings\\";}s:19:\\"exclude_dirs_suffix\\";a:7:{s:4:\\"name\\";s:19:\\"exclude_dirs_suffix\\";s:4:\\"desc\\";s:27:\\"dirres2_exclude_dirs_suffix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"{ExChild}\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:18:\\"Exclusion settings\\";}s:18:\\"exclude_extensions\\";a:7:{s:4:\\"name\\";s:18:\\"exclude_extensions\\";s:4:\\"desc\\";s:26:\\"dirres2_exclude_extensions\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:18:\\"Exclusion settings\\";}s:17:\\"exclude_templates\\";a:7:{s:4:\\"name\\";s:17:\\"exclude_templates\\";s:4:\\"desc\\";s:25:\\"dirres2_exclude_templates\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:18:\\"Exclusion settings\\";}s:24:\\"exclude_text_in_elements\\";a:7:{s:4:\\"name\\";s:24:\\"exclude_text_in_elements\\";s:4:\\"desc\\";s:32:\\"dirres2_exclude_text_in_elements\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:8:\\"noresize\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:18:\\"Exclusion settings\\";}s:9:\\"templates\\";a:7:{s:4:\\"name\\";s:9:\\"templates\\";s:4:\\"desc\\";s:17:\\"dirres2_templates\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:11:\\"25,23,28,24\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:18:\\"Exclusion settings\\";}s:15:\\"insert_expander\\";a:7:{s:4:\\"name\\";s:15:\\"insert_expander\\";s:4:\\"desc\\";s:23:\\"dirres2_insert_expander\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:13:\\"Expander code\\";}s:19:\\"insert_expander_css\\";a:7:{s:4:\\"name\\";s:19:\\"insert_expander_css\\";s:4:\\"desc\\";s:27:\\"dirres2_insert_expander_css\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:13:\\"Expander code\\";}s:18:\\"insert_expander_js\\";a:7:{s:4:\\"name\\";s:18:\\"insert_expander_js\\";s:4:\\"desc\\";s:26:\\"dirres2_insert_expander_js\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:13:\\"Expander code\\";}s:8:\\"expander\\";a:7:{s:4:\\"name\\";s:8:\\"expander\\";s:4:\\"desc\\";s:16:\\"dirres2_expander\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:4:{i:0;a:2:{s:4:\\"text\\";s:9:\\"HighSlide\\";s:5:\\"value\\";s:9:\\"highslide\\";}i:1;a:2:{s:4:\\"text\\";s:8:\\"Colorbox\\";s:5:\\"value\\";s:8:\\"colorbox\\";}i:2;a:2:{s:4:\\"text\\";s:11:\\"prettyPhoto\\";s:5:\\"value\\";s:11:\\"prettyphoto\\";}i:3;a:2:{s:4:\\"text\\";s:9:\\"FancyBox2\\";s:5:\\"value\\";s:9:\\"fancybox2\\";}}s:5:\\"value\\";s:8:\\"colorbox\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:8:\\"Lightbox\\";}s:10:\\"max_height\\";a:7:{s:4:\\"name\\";s:10:\\"max_height\\";s:4:\\"desc\\";s:18:\\"dirres2_max_height\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"600\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:8:\\"Lightbox\\";}s:9:\\"max_width\\";a:7:{s:4:\\"name\\";s:9:\\"max_width\\";s:4:\\"desc\\";s:17:\\"dirres2_max_width\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"800\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:8:\\"Lightbox\\";}s:10:\\"min_height\\";a:7:{s:4:\\"name\\";s:10:\\"min_height\\";s:4:\\"desc\\";s:18:\\"dirres2_min_height\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"100\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:8:\\"Lightbox\\";}s:9:\\"min_width\\";a:7:{s:4:\\"name\\";s:9:\\"min_width\\";s:4:\\"desc\\";s:17:\\"dirres2_min_width\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"100\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:8:\\"Lightbox\\";}s:9:\\"slideshow\\";a:7:{s:4:\\"name\\";s:9:\\"slideshow\\";s:4:\\"desc\\";s:17:\\"dirres2_slideshow\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:8:\\"Lightbox\\";}s:5:\\"style\\";a:7:{s:4:\\"name\\";s:5:\\"style\\";s:4:\\"desc\\";s:13:\\"dirres2_style\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:5:{i:0;a:2:{s:4:\\"text\\";s:6:\\"Style1\\";s:5:\\"value\\";s:6:\\"style1\\";}i:1;a:2:{s:4:\\"text\\";s:6:\\"Style2\\";s:5:\\"value\\";s:6:\\"style2\\";}i:2;a:2:{s:4:\\"text\\";s:6:\\"Style3\\";s:5:\\"value\\";s:6:\\"style3\\";}i:3;a:2:{s:4:\\"text\\";s:6:\\"Style4\\";s:5:\\"value\\";s:6:\\"style4\\";}i:4;a:2:{s:4:\\"text\\";s:6:\\"Style5\\";s:5:\\"value\\";s:6:\\"style5\\";}}s:5:\\"value\\";s:6:\\"style1\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:18:\\"Lightbox: Colorbox\\";}s:10:\\"transition\\";a:7:{s:4:\\"name\\";s:10:\\"transition\\";s:4:\\"desc\\";s:18:\\"dirres2_transition\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:3:{i:0;a:2:{s:4:\\"text\\";s:7:\\"Elastic\\";s:5:\\"value\\";s:7:\\"elastic\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"Fade\\";s:5:\\"value\\";s:4:\\"fade\\";}i:2;a:2:{s:4:\\"text\\";s:4:\\"None\\";s:5:\\"value\\";s:4:\\"none\\";}}s:5:\\"value\\";s:7:\\"elastic\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:18:\\"Lightbox: Colorbox\\";}s:12:\\"fb2_autoPlay\\";a:7:{s:4:\\"name\\";s:12:\\"fb2_autoPlay\\";s:4:\\"desc\\";s:20:\\"dirres2_fb2_autoPlay\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:19:\\"Lightbox: FancyBox2\\";}s:14:\\"fb2_closeClick\\";a:7:{s:4:\\"name\\";s:14:\\"fb2_closeClick\\";s:4:\\"desc\\";s:22:\\"dirres2_fb2_closeClick\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:19:\\"Lightbox: FancyBox2\\";}s:15:\\"fb2_closeEffect\\";a:7:{s:4:\\"name\\";s:15:\\"fb2_closeEffect\\";s:4:\\"desc\\";s:23:\\"dirres2_fb2_closeEffect\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:7:\\"elastic\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:19:\\"Lightbox: FancyBox2\\";}s:14:\\"fb2_closeSpeed\\";a:7:{s:4:\\"name\\";s:14:\\"fb2_closeSpeed\\";s:4:\\"desc\\";s:22:\\"dirres2_fb2_closeSpeed\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"150\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:19:\\"Lightbox: FancyBox2\\";}s:14:\\"fb2_openEffect\\";a:7:{s:4:\\"name\\";s:14:\\"fb2_openEffect\\";s:4:\\"desc\\";s:22:\\"dirres2_fb2_openEffect\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:7:\\"elastic\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:19:\\"Lightbox: FancyBox2\\";}s:13:\\"fb2_openSpeed\\";a:7:{s:4:\\"name\\";s:13:\\"fb2_openSpeed\\";s:4:\\"desc\\";s:21:\\"dirres2_fb2_openSpeed\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"150\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:19:\\"Lightbox: FancyBox2\\";}s:11:\\"fb2_padding\\";a:7:{s:4:\\"name\\";s:11:\\"fb2_padding\\";s:4:\\"desc\\";s:19:\\"dirres2_fb2_padding\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"0\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:19:\\"Lightbox: FancyBox2\\";}s:13:\\"fb2_playSpeed\\";a:7:{s:4:\\"name\\";s:13:\\"fb2_playSpeed\\";s:4:\\"desc\\";s:21:\\"dirres2_fb2_playSpeed\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:4:\\"3000\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:19:\\"Lightbox: FancyBox2\\";}s:16:\\"caption_position\\";a:7:{s:4:\\"name\\";s:16:\\"caption_position\\";s:4:\\"desc\\";s:24:\\"dirres2_caption_position\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:7:{i:0;a:2:{s:4:\\"text\\";s:11:\\"Above image\\";s:5:\\"value\\";s:5:\\"above\\";}i:1;a:2:{s:4:\\"text\\";s:12:\\"Top of image\\";s:5:\\"value\\";s:3:\\"top\\";}i:2;a:2:{s:4:\\"text\\";s:14:\\"Lefthand panel\\";s:5:\\"value\\";s:9:\\"leftpanel\\";}i:3;a:2:{s:4:\\"text\\";s:15:\\"Middle of image\\";s:5:\\"value\\";s:6:\\"middle\\";}i:4;a:2:{s:4:\\"text\\";s:15:\\"Righthand panel\\";s:5:\\"value\\";s:10:\\"rightpanel\\";}i:5;a:2:{s:4:\\"text\\";s:6:\\"Bottom\\";s:5:\\"value\\";s:6:\\"bottom\\";}i:6;a:2:{s:4:\\"text\\";s:5:\\"Below\\";s:5:\\"value\\";s:5:\\"below\\";}}s:5:\\"value\\";s:5:\\"below\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:19:\\"Lightbox: Highslide\\";}s:14:\\"caption_source\\";a:7:{s:4:\\"name\\";s:14:\\"caption_source\\";s:4:\\"desc\\";s:22:\\"dirres2_caption_source\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:3:{i:0;a:2:{s:4:\\"text\\";s:14:\\"Image Alt text\\";s:5:\\"value\\";s:14:\\"this.thumb.alt\\";}i:1;a:2:{s:4:\\"text\\";s:16:\\"Image title text\\";s:5:\\"value\\";s:16:\\"this.thumb.title\\";}i:2;a:2:{s:4:\\"text\\";s:18:\\"Image anchor title\\";s:5:\\"value\\";s:12:\\"this.a.title\\";}}s:5:\\"value\\";s:16:\\"this.thumb.title\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:19:\\"Lightbox: Highslide\\";}s:13:\\"large_caption\\";a:7:{s:4:\\"name\\";s:13:\\"large_caption\\";s:4:\\"desc\\";s:21:\\"dirres2_large_caption\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"120\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:19:\\"Lightbox: Highslide\\";}s:12:\\"outline_type\\";a:7:{s:4:\\"name\\";s:12:\\"outline_type\\";s:4:\\"desc\\";s:20:\\"dirres2_outline_type\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:7:{i:0;a:2:{s:4:\\"text\\";s:21:\\"Rounded white corners\\";s:5:\\"value\\";s:13:\\"rounded-white\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"None\\";s:5:\\"value\\";s:4:\\"null\\";}i:2;a:2:{s:4:\\"text\\";s:10:\\"Outer glow\\";s:5:\\"value\\";s:10:\\"outer-glow\\";}i:3;a:2:{s:4:\\"text\\";s:11:\\"Glossy dark\\";s:5:\\"value\\";s:11:\\"glossy-dark\\";}i:4;a:2:{s:4:\\"text\\";s:21:\\"Rounded black corners\\";s:5:\\"value\\";s:13:\\"rounded-black\\";}i:5;a:2:{s:4:\\"text\\";s:7:\\"Beveled\\";s:5:\\"value\\";s:7:\\"beveled\\";}i:6;a:2:{s:4:\\"text\\";s:11:\\"Drop shadow\\";s:5:\\"value\\";s:11:\\"drop-shadow\\";}}s:5:\\"value\\";s:13:\\"rounded-white\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:19:\\"Lightbox: Highslide\\";}s:5:\\"theme\\";a:7:{s:4:\\"name\\";s:5:\\"theme\\";s:4:\\"desc\\";s:13:\\"dirres2_theme\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:6:{i:0;a:2:{s:4:\\"text\\";s:7:\\"Default\\";s:5:\\"value\\";s:10:\\"pp_default\\";}i:1;a:2:{s:4:\\"text\\";s:12:\\"Dark rounded\\";s:5:\\"value\\";s:12:\\"dark_rounded\\";}i:2;a:2:{s:4:\\"text\\";s:11:\\"Dark square\\";s:5:\\"value\\";s:11:\\"dark_square\\";}i:3;a:2:{s:4:\\"text\\";s:13:\\"Light rounded\\";s:5:\\"value\\";s:13:\\"light_rounded\\";}i:4;a:2:{s:4:\\"text\\";s:12:\\"Light square\\";s:5:\\"value\\";s:12:\\"light_square\\";}i:5;a:2:{s:4:\\"text\\";s:8:\\"Facebook\\";s:5:\\"value\\";s:8:\\"facebook\\";}}s:5:\\"value\\";s:10:\\"pp_default\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:21:\\"Lightbox: PrettyPhoto\\";}s:18:\\"default_thumb_path\\";a:7:{s:4:\\"name\\";s:18:\\"default_thumb_path\\";s:4:\\"desc\\";s:26:\\"dirres2_default_thumb_path\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:9:\\"Thumbnail\\";}s:22:\\"rewrite_image_on_exist\\";a:7:{s:4:\\"name\\";s:22:\\"rewrite_image_on_exist\\";s:4:\\"desc\\";s:30:\\"dirres2_rewrite_image_on_exist\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:9:\\"Thumbnail\\";}s:9:\\"thumb_key\\";a:7:{s:4:\\"name\\";s:9:\\"thumb_key\\";s:4:\\"desc\\";s:17:\\"dirres2_thumb_key\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:6:\\"_thumb\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:9:\\"Thumbnail\\";}s:11:\\"thumb_param\\";a:7:{s:4:\\"name\\";s:11:\\"thumb_param\\";s:4:\\"desc\\";s:19:\\"dirres2_thumb_param\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:25:\\"\'zc\'=1,\'bg\'=\'#fff\',\'q\'=80\\";s:7:\\"lexicon\\";s:24:\\"directresize2:properties\\";s:4:\\"area\\";s:9:\\"Thumbnail\\";}s:13:\\"thumbnail_dir\\";a:7:{s:4:\\"name\\";s:13:\\"thumbnail_dir\\";s:4:\\"desc\\";s:21:\\"dirres2_thumbnail_dir\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:6:\\"thumbs\\";s:7:\\"lexicon\\";N;s:4:\\"area\\";s:9:\\"Thumbnail\\";}}","disabled":0,"moduleguid":"","static":0,"static_file":"","content":"\\/**\\n * DirectResize2 Plugin\\n \\n * Author: Stepan Prishepenko (Setest) <itman116@gmail.com>\\n \\n * Version: 1.1.4 (17.04.2013) Added new parameters in all lightboxes(min_width,min_height)\\n * Version: 1.1.3 (17.04.2013) Fixed a bug check of imagesize\\n * Version: 1.1.2 (16.04.2013) Fixed a bugs in parser html5 and html4 documents, fix css style, add FancyBox2 lightbox\\n * Version: 1.0.2 (14.04.2013) Fixed a bugs in js and css paths, fix parameter style (colorbox part) in set of parameters.\\n * Version: 1.0.1 (09.04.2013) Fixed a bugs in processing exception parameters\\n * Version: 1.0.0 (08.04.2013) It`s must correctly work in ModX {REVO} 2.2 - 2.2.6\\n \\n * Events: OnWebPagePrerender\\n * Required: PhpThumbOf snippet for resizing images\\n\\n * Based on: DirectResize by Adrian Cherry <github.com\\/apcherry\\/directresize>\\n\\n   Description:   \\n\\t\\tA modx revo plugin to apply the a selected image expander to any \\n\\t\\timages in modx Revo. The available packages are available for selection \\n\\t\\tvia the plugin properties.\\n\\n\\t\\t* Highslide\\n\\t\\t* Colorbox\\n\\t\\t* prettyPhoto\\n *\\/\\n \\n\\n\\/\\/ if ($modx->user->get(\'id\')!=1) {return;}\\n$e = &$modx->event;\\n\\/\\/ \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c \\u043d\\u0443\\u0436\\u043d\\u043e\\u0435 \\u0441\\u043e\\u0431\\u044b\\u0442\\u0438\\u0435\\nif ($e->name != \'OnWebPagePrerender\') {return;}\\n\\n$log = $modx->getOption(\'log\', $scriptProperties,false);\\n\\/\\/ if ($modx->user->get(\'id\')!=1) {$log=false;}\\n\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/--=LOG=--\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\nclass log{\\n\\tfunction __construct($modx,$debug) {\\n\\t\\t$this->modx = &$modx;\\n\\t\\t$this->debug = $debug; \\/\\/ \\u043f\\u0440\\u0438\\u043d\\u0438\\u043c\\u0430\\u0435\\u0442 true,false\\n\\t\\tif ($this->debug){\\n\\t\\t\\t$logFileName = $this->modx->event->activePlugin;\\n\\t\\t\\t$this->modx->setLogLevel(modX::LOG_LEVEL_INFO);\\n\\t\\t\\t\\t$date = date(\'Y-m-d____H-i-s\');  \\/\\/ \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u0432 \\u0432\\u044b\\u0432\\u043e\\u0434\\u0435 \\u0434\\u0430\\u0442\\u044b : - \\u043d\\u0435\\u043b\\u044c\\u0437\\u044f, \\u0438\\u043d\\u0430\\u0447\\u0435 \\u043d\\u0435 \\u0441\\u043e\\u0437\\u0434\\u0430\\u0435\\u0442\\u0441\\u044f \\u043b\\u043e\\u0433 \\u0432 \\u0444\\u0430\\u0439\\u043b\\n\\t\\t\\t\\t$this->modx->setLogTarget(array(\\n\\t\\t\\t\\t   \\/\\/ \'target\' => \'ECHO\',\\n\\t\\t\\t\\t   \'target\' => \'FILE\',\\n\\t\\t\\t\\t   \'options\' => array(\'filename\' => \\"{$logFileName}_$date.log\\")\\t\\t\\t\\t   \\n\\t\\t\\t));\\t\\t\\n\\t\\t} \\n\\t}\\n\\tfunction write($info){\\n\\t\\tif (!$this->debug){return;}\\n\\t\\t$this->modx->log(modX::LOG_LEVEL_INFO, $info);\\n\\t}\\n}\\n$log=new log($modx,$log);\\t\\n\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/--=LOG=--\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\n\\/\\/ $log->write(777); return;\\n\\n\\/\\/ $modx->lexicon->load(\'directresize2:properties\');\\n\\n\\/\\/ $path = $modx->getOption(\'cache_path\',$scriptProperties,\'assets\\/components\\/directresize2\\/cache\');\\n\\n$thumb_key = $modx->getOption(\'thumb_key\',$scriptProperties,\'\'); \\/\\/ this parameter add in the filename of thumbnail\\n$thumbnail_dir = $modx->getOption(\'thumbnail_dir\', $scriptProperties);\\n$thumbnail_dir = str_replace(\'\\/\\/\', \'\\/\', $thumbnail_dir);\\n$thumbnail_dir = str_replace(array(\\"..\\",\\".\\"), \\"\\", $thumbnail_dir);\\nif (empty($thumbnail_dir)) return;\\n\\n$config_default_thumb_param = $modx->getOption(\'thumb_param\', $scriptProperties, \\"\\n\'zc\'=1,\'bg\'=\'#fff\',\'q\'=80\\");\\n\\/\\/ \'w\'=200,\'h\'=150,\'zc\'=1,\'bg\'=\'#fff\',\'q\'=70\\");\\n$config_default_thumb_param = str_replace(array(\\"\'\\",\\" \\"),\\"\\",$config_default_thumb_param);\\n\\n\\n\\/\\/ $r = $modx->getOption(\'method\',$scriptProperties,0);\\n\\/\\/ $q_jpg = $modx->getOption(\'jpg_quality\',$scriptProperties,85);\\n\\/\\/ $q_png = $modx->getOption(\'png_quality\',$scriptProperties,8);\\n\\n$default_thumb_path = $modx->getOption(\'default_thumb_path\',$scriptProperties,null); \\/\\/ assets\\/images\\/thumbs\\n\\n\\/\\/ if enabled then insert special JS for lighbox \\n$insert_expander = $modx->getOption(\'insert_expander\',$scriptProperties,true);\\n\\/\\/ if enabled then insert JS code of components such as: jquery.js, colorbox.js etc.\\n$insert_expander_js = $modx->getOption(\'insert_expander_js\',$scriptProperties,true);\\n\\/\\/ if enabled then insert CSS code of components such as: colorbox.css, highslide.css etc.\\n$insert_expander_css = $modx->getOption(\'insert_expander_css\',$scriptProperties,true);\\n\\/\\/ rewrite thubmnail image if it exist, you can off it to add speed this plugin\\n$rewrite_image_on_exist = $modx->getOption(\'rewrite_image_on_exist\',$scriptProperties,false);\\n\\n\\/*===================--THUMBNAIL PARAMETERS--====================*\\/\\n\\/\\/ $lightbox = $modx->getOption(\'enable\',$scriptProperties,true);\\n$expander = $modx->getOption(\'expander\',$scriptProperties,\'highslide\');\\n$lightbox_w = $modx->getOption(\'max_width\',$scriptProperties,800);\\n$lightbox_h = $modx->getOption(\'max_height\',$scriptProperties,600);\\n\\n$lightbox_w_min = $modx->getOption(\'min_width\',$scriptProperties,100);\\n$lightbox_h_min = $modx->getOption(\'min_height\',$scriptProperties,100);\\n\\n\\n$slideshow = ($modx->getOption(\'slideshow\',$scriptProperties,false))? \'true\' : \'false\';\\n$duration = $modx->getOption(\'slide_duration\',$scriptProperties,2500);\\n$opacity = number_format($modx->getOption(\'opacity\',$scriptProperties,50)\\/100,2);\\n\\n\\/\\/ FancyBox2\\n$fb2_closeClick = $modx->getOption(\'fb2_closeClick\',$scriptProperties,true);\\n$fb2_closeClick = $fb2_closeClick ? \'true\' : \'false\';\\n\\n$fb2_closeEffect = $modx->getOption(\'fb2_closeEffect\',$scriptProperties,\'elastic\');\\n$fb2_openEffect = $modx->getOption(\'fb2_openEffect\',$scriptProperties,\'elastic\');\\n$fb2_openSpeed = $modx->getOption(\'fb2_openSpeed\',$scriptProperties,150);\\n$fb2_closeSpeed = $modx->getOption(\'fb2_closeSpeed\',$scriptProperties,150);\\n$fb2_padding = $modx->getOption(\'fb2_padding\',$scriptProperties,0);\\n$fb2_autoPlay = $modx->getOption(\'fb2_autoPlay\',$scriptProperties,false);\\n$fb2_autoPlay = $fb2_autoPlay ? \'true\' : \'false\';\\n\\n$fb2_playSpeed = $modx->getOption(\'fb2_playSpeed\',$scriptProperties,3000);\\n\\n\\n\\/\\/ Highslide\\n$captionPosition = $modx->getOption(\'caption_position\',$scriptProperties,\'below\');\\n$hs_captionEval = $modx->getOption(\'caption_source\',$scriptProperties,\'this.thumb.alt\');\\n$largeCaption = $modx->getOption(\'large_caption\',$scriptProperties,120);\\n$hs_outlineType = $modx->getOption(\'outline_type\',$scriptProperties,\'rounded-white\');\\n$hs_credit = $modx->getOption(\'hs_credit\',$scriptProperties,\'Highslide JS\');\\n\\/\\/ Colorbox\\n$cb_style = $modx->getOption(\'style\',$scriptProperties,\'style1\');\\nif (empty($cb_style)) $cb_style=\'style1\';\\n$cb_transition = $modx->getOption(\'transition\',$scriptProperties,\'elastic\');\\n\\/\\/ PrettyPhoto\\n$pp_theme = $modx->getOption(\'theme\',$scriptProperties,\'pp_default\');\\n\\n\\/*===================--EXCLUDE--====================*\\/\\n$templates = $modx->getOption(\'templates\', $scriptProperties, \'\');\\n$exclude_templates = $modx->getOption(\'exclude_templates\', $scriptProperties, \'\');\\n$exclude_dirs = $modx->getOption(\'exclude_dirs\', $scriptProperties, null);\\t\\/\\/ \\u043f\\u0430\\u043f\\u043a\\u0438 \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d\\u0438\\u044f\\nif ($exclude_dirs) $exclude_dirs=explode(\\",\\",$exclude_dirs);\\n\\n$exclude_dirs_suffix = $modx->getOption(\'exclude_dirs_suffix\', $scriptProperties, \\"{ExChild}\\");\\t\\/\\/ \\u0441\\u0443\\u0444\\u0444\\u0438\\u043a\\u0441 \\u043f\\u0430\\u043f\\u043a\\u0438 \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d\\u0438\\u044f, \\u043f\\u0440\\u0438 \\u043d\\u0430\\u043b\\u0438\\u0447\\u0438\\u0438, \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0433\\u043e \\u0434\\u043e\\u0447\\u0435\\u0440\\u043d\\u0438\\u0435 \\u043f\\u0430\\u043f\\u043a\\u0438 \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0430\\u044e\\u0442\\u0441\\u044f\\n$exclude_dirs_children = $modx->getOption(\'exclude_dirs_children\', $scriptProperties, null);\\t\\/\\/ \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0430\\u0442\\u044c \\u043b\\u0438 \\u0434\\u043e\\u0447\\u0435\\u0440\\u043d\\u0438\\u0435 \\u0434\\u0438\\u0440\\u0435\\u043a\\u0442\\u043e\\u0440\\u0438\\u0438?\\n$exclude_text_in_elements = $modx->getOption(\'exclude_text_in_elements\', $scriptProperties, \\"noresize\\");\\t\\/\\/ \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0430\\u0435\\u0442 \\u0438\\u0437 \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u043a\\u0438 \\u0438\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0435 \\u0441\\u043e\\u0434\\u0435\\u0440\\u0436\\u0430\\u0442 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0439 \\u0442\\u0435\\u043a\\u0441\\u0442 \\u0432 \\u044d\\u043b\\u0435\\u043c\\u0435\\u043d\\u0442\\u0430\\u0445 alt, class, id, tittle\\n$exclude_extensions = $modx->getOption(\'exclude_extensions\', $scriptProperties, null);\\t\\/\\/ \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0430\\u0435\\u043c \\u0444\\u0430\\u0439\\u043b\\u044b \\u0441 \\u0440\\u0430\\u0448\\u0438\\u0440\\u0435\\u043d\\u0438\\u0435\\u043c ... \\u0441\\u043e\\u0434\\u0435\\u0440\\u0436\\u0430\\u0449\\u0438\\u0435\\u0441\\u044f \\u0432 exclude_extensions, \\u043f\\u0435\\u0440\\u0435\\u0447\\u0438\\u0441\\u043b\\u0435\\u043d\\u043d\\u044b\\u0435 \\u0447\\u0435\\u0440\\u0435\\u0437 \\u0437\\u0430\\u043f\\u044f\\u0442\\u0443\\u044e\\n\\n\\/\\/ \\u043f\\u043e\\u0434\\u043a\\u043b\\u044e\\u0447\\u0430\\u0435\\u043c \\u0441\\u043e\\u0431\\u0441\\u0442\\u0432\\u0435\\u043d\\u043d\\u0443\\u044e \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u044e \\u0443\\u043c\\u0435\\u043d\\u044c\\u0448\\u0435\\u043d\\u0438\\u044f \\u043a\\u0430\\u0440\\u0442\\u0438\\u043d\\u043e\\u043a\\n\\/\\/ require_once MODX_CORE_PATH.\'components\\/directresize2\\/elements\\/plugins\\/plugin.directresize.php\';\\n\\/\\/ \\u043f\\u043e\\u0434\\u043a\\u043b\\u044e\\u0447\\u0430\\u0435\\u043c phpthumb\\nrequire_once MODX_CORE_PATH.\'model\\/phpthumb\\/phpthumb.class.php\';\\n\\n$o = &$modx->resource->_output; \\/\\/ get a reference to the output\\n$cur_output = $modx->resource->get(\'content\');\\n$foundImage = false; \\/\\/ if no image found then don\'t insert javascript\\n\\n\\/\\/ working only in templates\\n$cur_param_res_template = $modx->resource->get(\'template\');\\nif (!empty($templates) and $cur_param_res_template and !in_array($cur_param_res_template, explode(\',\', str_replace(\\" \\",\\"\\",$templates)))){\\n\\t\\/\\/ \\u0435\\u0441\\u043b\\u0438 \\u0434\\u043e\\u043a\\u0443\\u043c\\u0435\\u043d\\u0442 \\u043d\\u0435 \\u043f\\u043e\\u043f\\u0430\\u0434\\u0430\\u0435\\u0442 \\u0432 \\u0448\\u0430\\u0431\\u043b\\u043e\\u043d \\u0442\\u043e \\u0438\\u0437\\u043c\\u0435\\u043d\\u0435\\u043d\\u0438\\u044f \\u043d\\u0435 \\u043f\\u0440\\u043e\\u0438\\u0432\\u043e\\u0434\\u044f\\u0442\\u0441\\u044f\\n\\t\\/\\/ in_array($cur_param_res_template, explode(\',\', $templates))\\n\\treturn;\\n}\\t\\n\\n\\/\\/ exclude templates\\nif (!empty($exclude_templates) and $cur_param_res_template and in_array($cur_param_res_template, explode(\',\', str_replace(\\" \\",\\"\\",$exclude_templates)))){\\n\\t\\/\\/ \\u0435\\u0441\\u043b\\u0438 \\u0434\\u043e\\u043a\\u0443\\u043c\\u0435\\u043d\\u0442 \\u043f\\u043e\\u043f\\u0430\\u0434\\u0430\\u0435\\u0442 \\u0432 \\u0448\\u0430\\u0431\\u043b\\u043e\\u043d \\u0442\\u043e \\u0438\\u0437\\u043c\\u0435\\u043d\\u0435\\u043d\\u0438\\u044f \\u043d\\u0435 \\u043f\\u0440\\u043e\\u0438\\u0432\\u043e\\u0434\\u044f\\u0442\\u0441\\u044f\\n\\treturn;\\n}\\t\\n\\n$output_dom=new DOMDocument();\\n\\n\\/\\/ \\u0440\\u0430\\u0431\\u043e\\u0447\\u0438\\u0439 \\u0432\\u0430\\u0440\\u0438\\u0430\\u043d\\u0442, \\u043d\\u043e \\u043f\\u0440\\u0438 \\u043d\\u0435\\u043c \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u044f asXml() \\u0432\\u043e\\u0437\\u0432\\u0440\\u0430\\u0449\\u0430\\u0435\\u0442 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0432 ASCII\\n\\/\\/ \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0435 \\u043d\\u0438\\u043a\\u0430\\u043a \\u043d\\u0435 \\u0445\\u043e\\u0442\\u044f\\u0442 \\u043a\\u043e\\u043d\\u0432\\u0435\\u0440\\u0442\\u0438\\u0440\\u043e\\u0432\\u0430\\u0442\\u044c\\u0441\\u044f \\u0432 \\u0440\\u043e\\u0434\\u043d\\u0443\\u044e \\u043a\\u043e\\u0434\\u0438\\u0440\\u043e\\u0432\\u043a\\u0443\\n\\/\\/ $output_dom->loadHTML(\'xml encoding=\\"UTF-8\\">\' . $cur_output);\\n\\n$charset=$modx->getOption(\'modx_charset\');\\nif (!$charset) $charset=\\"UTF-8\\";\\n$cur_output=\\"<html>\\n <head>\\n    <meta http-equiv=\'content-type\' content=\'text\\/html; charset={$charset}\'>\\n  <\\/head>\\n<body>{$cur_output}<\\/body>\\n<\\/html>\\";\\n$output_dom->loadHTML($cur_output);\\n\\n\\n$xml=simplexml_import_dom($output_dom); \\/\\/ just to make xpath more simple\\n$images=$xml->xpath(\'\\/\\/img\');\\n\\/\\/ print_r($images);\\n\\nif (!function_exists(\'css_parse\')) {\\n\\tfunction css_parse($styles){\\n\\t\\t\\/\\/ parse css and get all the key:value pair styles\\n\\t\\t$css_array = array(); \\/\\/ master array to hold all values\\n\\t\\tif (isset($styles) and $styles = explode(\';\', strtolower($styles)) and !empty($styles)){\\n\\t\\t\\tforeach ($styles as $style) {\\n\\t\\t\\t\\t$value = explode(\':\', $style);\\n\\t\\t\\t\\t\\/\\/ build the master css array\\n\\t\\t\\t\\tif (!empty($value[0]))\\t$css_array[$value[0]] = $value[1];\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\treturn $css_array;\\n\\t}\\n}\\n\\/\\/ \\u0444\\u0443\\u043d\\u043a\\u0446\\u0438\\u044f \\u0440\\u0430\\u0437\\u0431\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0441\\u0442\\u0440\\u043e\\u043a\\u0443 \\u0432\\u0438\\u0434\\u0430 \\"\'param1\'=\'value1\',...\\" \\u0438 \\u0432\\u043e\\u0437\\u0432\\u0440\\u0430\\u0449\\u0430\\u0435\\u0442 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432\\nif (!function_exists(\'getconfigparam\')) {\\n\\t\\/\\/ function getconfigparam($config_default_param, $type){\\n\\tfunction getconfigparam($config_default_param){\\n\\t\\tforeach (explode(\\",\\",$config_default_param) as $parametr) {\\n\\t\\t\\t$param_arr=explode(\\"=\\",$parametr);\\n\\t\\t\\t\\t\\/\\/ $param[$type][$param_arr[0]]=$param_arr[1];\\n\\t\\t\\t\\t$param[$param_arr[0]]=$param_arr[1];\\n\\t\\t}\\n\\t\\treturn $param;\\n\\t}\\n}\\n\\n$count_imgs=0;\\n\\nif (!empty($images)) {\\n\\t\\/\\/ get version modx\\n\\t$log->write(\\"ModX version:\\".$modx->getOption(\'settings_version\'));\\n\\t\\/\\/ \\u043f\\u0440\\u0438\\u0432\\u043e\\u0434\\u0438\\u043c \\u043a \\u043e\\u0431\\u0449\\u0435\\u043c\\u0443 \\u0432\\u0438\\u0434\\u0443 \\u0432\\u0441\\u0435 img\\n\\t$o = preg_replace(\'\\/<img\\\\s+(([a-z]+=\\".*?\\")+\\\\s*)>\\/\' , \\"<img $1 \\/>\\", $o);\\n}\\nif (strpos(\\"<!DOCTYPE html>\\")) $html5=true; \\/\\/ \\u0432 \\u0441\\u0432\\u044f\\u0437\\u0438 \\u0441 \\u0440\\u0430\\u0437\\u043b\\u0438\\u0447\\u043d\\u043e\\u0439 \\u043e\\u0431\\u0440\\u0430\\u0431\\u043e\\u0442\\u043a\\u043e\\u0439 \\u0442\\u0435\\u0433\\u043e\\u0432 \\u0432 html4 \\u0438 5 \\u0432\\u0435\\u0440\\u0441\\u0438\\u0438\\n\\/\\/ \\u0445\\u043e\\u0442\\u044f \\u043c\\u043e\\u0436\\u043d\\u043e \\u043f\\u043e\\u0438\\u0433\\u0440\\u0430\\u0442\\u044c\\u0441\\u044f \\u0438 \\u0441 normalizeDocument()\\n\\nforeach ($images as $imgs) {\\n\\t$imgstring = $imgs->asXML(); \\/\\/ \\u0442\\u0430\\u043a \\u043a\\u0430\\u043a \\u043f\\u0440\\u0438 \\u044d\\u0442\\u043e\\u043c \\u0432\\u043e\\u0437\\u0432\\u0440\\u0430\\u0442\\u0435 \\u0443 \\u043d\\u0430\\u0441 \\u043f\\u0440\\u043e\\u0438\\u0441\\u0445\\u043e\\u0434\\u0438\\u0442 \\u0437\\u0430\\u043c\\u0435\\u043d\\u0430 \\" \\/>\\" \\u043d\\u0430 \\"\\/>\\" \\u0442\\u043e \\u043d\\u0430\\u043c \\u043d\\u0443\\u0436\\u043d\\u043e \\u0432\\u0435\\u0440\\u043d\\u0443\\u0442\\u044c \\u044d\\u0442\\u043e\\u0442 \\u043f\\u0440\\u043e\\u0431\\u0435\\u043b \\u0438\\u043d\\u0430\\u0447\\u0435 \\u043c\\u044b \\u043d\\u0435 \\u043f\\u043e\\u043b\\u0443\\u0447\\u0438\\u043c \\u0437\\u0430\\u043c\\u0435\\u043d\\u0443 \\u0432 \\u0438\\u0442\\u043e\\u0433\\u0435\\n\\tif ($html5==true) {\\n\\t\\t$imgstring=str_replace(array(\' \\/>\',\'\\/>\'), \'>\', $imgstring);\\n\\t}\\n\\telse {\\n\\t\\t$imgstring=str_replace(\'\\/>\', \' \\/>\', $imgstring);\\n\\t}\\n\\n\\t$path_img  = $imgs[\'src\'];   \\n\\t$id        = $imgs[\'id\'];\\n\\t$alt       = $imgs[\'alt\'];\\n\\t$title     = $imgs[\'title\'];\\n\\t\\/\\/ $class     = explode(\\" \\",$imgs[\'class\']);\\n\\t$class     = $imgs[\'class\']; \\/*Fix by Setest 2013-04-09*\\/\\n\\t\\n\\t$path_img = urldecode($path_img); \\/\\/ Fix by Fi1osof\\n\\t\\/\\/ $path_img = $path_img; \\/\\/ Fix by Fi1osof\\n\\t$log->write(print_r($path_img,true));\\n\\t\\n\\tif (file_exists($path_img)) {\\n\\t\\t\\/\\/ echo \\"|\\".substr($path_img,0,strlen($path_base)).\\"|\\".PHP_EOL;\\n\\t\\t\\/\\/ echo \\"$path_img\\".PHP_EOL;\\n\\t\\t\\/\\/ echo \\"$path_base\\".PHP_EOL;\\n\\t\\t\\/\\/ echo \\"=====\\".PHP_EOL;\\n\\t\\t$count_imgs++;\\n\\t\\t$log->write(\\"==========---IMG \\u2116{$count_imgs}---==========\\");\\n\\t\\tif (strpos(\\"{$id} {$alt} {$title} {$class}\\",$exclude_text_in_elements)!== false){\\n\\t\\t\\t$log->write(\\"Exclude image: $path_img, because \'id\', \'class\', \'title\' or \'id\' is contains \'$exclude_text_in_elements\'\\");\\n\\t\\t\\tcontinue;\\n\\t\\t}\\n\\n\\t\\t\\n\\t\\t$img_dir=dirname($path_img);\\n\\t\\t$path_img_full = MODX_BASE_PATH.$path_img;\\n\\/\\/ echo \\"@@@$path_img_full@@@\\";\\n\\t\\t$img_name = pathinfo($path_img, PATHINFO_FILENAME);\\n\\t\\t$ext = pathinfo($path_img, PATHINFO_EXTENSION);\\t\\n\\t\\t\\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043a\\u043e\\u043d\\u0444\\u0438\\u0433\\u0443\\u0440\\u0430\\u0446\\u0438\\u044e \\u043f\\u043e \\u0443\\u043c\\u043e\\u043b\\u0447\\u0430\\u043d\\u0438\\u044e\\n\\t\\t$config_default = getconfigparam($config_default_thumb_param);\\t\\n\\n\\t\\t\\/\\/ \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d\\u0438\\u0435 \\u0440\\u0430\\u0441\\u0448\\u0438\\u0440\\u0435\\u043d\\u0438\\u0435 \\u0444\\u0430\\u0439\\u043b\\u0430 exclude_extensions\\n\\t\\t\\/*Fix by Setest 2013-04-09*\\/\\n\\t\\tif ($exclude_extensions and $exclude_extensions=str_replace(\' \', \'\', $exclude_extensions) and ($exclude_extensions=explode(\\",\\",$exclude_extensions)) and (in_array($ext, $exclude_extensions))){\\n\\t\\t\\t$log->write(\\"except extension of file ({$ext}), return;\\");\\n\\t\\t\\tcontinue;\\t\\n\\t\\t}\\n\\t\\t\\n\\t\\t\\/\\/ \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c \\u043d\\u0430 \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d\\u0438\\u044f \\u0434\\u0438\\u0440\\u0435\\u043a\\u0442\\u043e\\u0440\\u0438\\u0438\\n\\t\\t\\/\\/ if ($exclude_dirs and $exclude_dirs=str_replace(\' \', \'\', $exclude_dirs) and (in_array($cur_dir,explode(\\",\\",$exclude_dirs)))){\\n\\t\\t$excl=false;\\n\\t\\tif ($exclude_dirs){\\n\\t\\t\\t\\/\\/ $log->write(\\"EXCL\\");\\n\\t\\t\\t\\/\\/ return;\\n\\t\\t\\tif ($exclude_dirs_children) {\\n\\t\\t\\t\\n\\t\\t\\t\\tforeach ($exclude_dirs as $path) {\\n\\t\\t\\t\\t\\t\\tif (strpos($img_dir, $path) !== false) \\/\\/return;\\n\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t$log->write(\\"except children, return;\\");\\n\\t\\t\\t\\t\\t\\t\\t$excl=true; break;\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\tforeach ($exclude_dirs as $path) { \\n\\t\\t\\t\\t\\t$log->write(\\"EXCLUDE DIRS CONDITIONS: curdir ($img_dir), exclude dir ($path)\\");\\n\\t\\t\\t\\t\\t\\/*Fix by Setest 2013-04-09*\\/\\n\\t\\t\\t\\t\\t\\/\\/ \\u0442\\u0430\\u043a \\u043a\\u0430\\u043a \\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044c \\u043c\\u043e\\u0436\\u0435\\u0442 \\u0443\\u043a\\u0430\\u0437\\u0430\\u0442\\u044c \\u043f\\u0430\\u043f\\u043a\\u0443 \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d\\u0438\\u044f \\u0432 \\u0434\\u0432\\u0443\\u0445 \\u0432\\u0438\\u0434\\u0430\\u0445 \\u043a \\u043f\\u0440\\u0438\\u043c\\u0435\\u0440\\u0443:\\n\\t\\t\\t\\t\\t\\/\\/ images\\/{ExChild} \\u0438\\u043b\\u0438 images{ExChild}, \\u0442\\u043e \\u043d\\u0443\\u0436\\u043d\\u043e \\u044d\\u0442\\u043e \\u0443\\u0447\\u0435\\u0441\\u0442\\u044c\\n\\t\\t\\t\\t\\tif ((strpos($path, $exclude_dirs_suffix) !== false) && (\\n\\t\\t\\t\\t\\t\\tstrpos($img_dir, substr($path,0,-1*(strlen($exclude_dirs_suffix)))) !== false\\n\\t\\t\\t\\t\\t\\tor\\n\\t\\t\\t\\t\\t\\tstrpos($img_dir, substr($path,0,-1*((strlen($exclude_dirs_suffix))+1))) !== false\\n\\t\\t\\t\\t\\t)) {\\n\\t\\t\\t\\t\\t\\t\\/\\/ \\u0435\\u0441\\u043b\\u0438 \\u0441\\u043e\\u0434\\u0435\\u0440\\u0436\\u0438\\u0442 \\u0432 \\u0441\\u0442\\u0440\\u043e\\u043a\\u0435 &ExChild\\n\\t\\t\\t\\t\\t\\t$log->write(\\"except {$exclude_dirs_suffix} in: {$path}, return;\\");\\n\\t\\t\\t\\t\\t\\t$excl=true; break;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t\\tif ($img_dir==str_replace($exclude_dirs_suffix, \'\', $path)) {\\n\\t\\t\\t\\t\\t\\t\\t$log->write(\\"except dir, return;\\");\\n\\t\\t\\t\\t\\t\\t\\t$excl=true; break;\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\/\\/ return $modx->error->failure(\\"\\u0417\\u0430\\u043f\\u0438\\u0441\\u0430\\u0442\\u044c \\u0432 \\u0434\\u0430\\u043d\\u043d\\u0443\\u044e \\u0434\\u0438\\u0440\\u0435\\u043a\\u0442\\u043e\\u0440\\u0438\\u044e \\u043d\\u0435\\u043b\\u044c\\u0437\\u044f \\u043e\\u043d\\u0430 \\u043d\\u0430\\u0445\\u043e\\u0434\\u0438\\u0442\\u0441\\u044f \\u0432 \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d\\u0438\\u044f\\u0445 \\u043f\\u043b\\u0430\\u0433\\u0438\\u043d\\u0430\\");\\n\\t\\t\\t\\t\\/\\/ return $modx->error->failure(\\"parent\\");\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\tif ($excl==true) continue;\\n\\n\\n\\t\\t\\/\\/ \\u0434\\u043b\\u044f \\u043e\\u043f\\u0440\\u0435\\u0434\\u0435\\u043b\\u0435\\u043d\\u0438\\u044f \\u0440\\u0435\\u0430\\u043b\\u044c\\u043d\\u043e\\u0433\\u043e \\u043f\\u0443\\u0442\\u0438 \\u0434\\u0430\\u0431\\u044b \\u0438\\u0441\\u043a\\u043b\\u044e\\u0447\\u0438\\u0442\\u044c \\u043a\\u0430\\u0440\\u0442\\u0438\\u043d\\u043a\\u0438 \\u0438\\u0437 \\u0432\\u0435\\u0431\\u0430 realpath\\n\\t\\t\\/\\/ dirname(__FILE__); basename pathinfo\\n\\t\\t\\/\\/ $img = strtolower($imgstring);\\n\\t\\t$verif_balise = sizeof(explode(\\"width\\",$imgstring)) + sizeof(explode(\\"height\\",$imgstring)) - 2;\\n\\t\\t\\n\\t\\tif (empty($verif_balise)) continue; \\/\\/ \\u0435\\u0441\\u043b\\u0438 \\u043d\\u0435\\u0442 \\u0448\\u0438\\u0440\\u0438\\u043d\\u044b \\u0438\\u043b\\u0438 \\u0432\\u044b\\u0441\\u043e\\u0442\\u044b \\u0438\\u0433\\u043d\\u043e\\u0440\\u0438\\u0440\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\/\\/ \\u0432\\u0435\\u0434\\u044c \\u044d\\u0442\\u0438 \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u044b \\u0437\\u0430\\u0447\\u0430\\u0441\\u0442\\u0443\\u044e \\u043f\\u043e\\u044f\\u0432\\u043b\\u044f\\u044e\\u0442\\u0441\\u044f \\u043f\\u0440\\u0438 \\u0438\\u0437\\u043c\\u0435\\u043d\\u0435\\u043d\\u0438\\u0438 \\u0432\\u044b\\u0441\\u043e\\u0442\\u044b \\u0438 \\u0448\\u0438\\u0440\\u0438\\u043d\\u044b\\n\\n\\t\\t$height=(int)$imgs[\'height\'];\\n\\t\\t$width=(int)$imgs[\'width\'];\\n\\t\\t\\/\\/ $log->write(\\"before: $height - $width\\");\\n\\t\\t\\/\\/ get size from style if it exist\\n\\t\\tif ($style=css_parse($imgs[\'style\'])) {\\n\\t\\t\\tif \\t((int)$style[\'height\']>0) $height=(int)str_replace(\'px\',\\"\\",$style[\'height\']);\\n\\t\\t\\tif \\t((int)$style[\'width\']>0)  $width=(int)str_replace(\'px\',\\"\\",$style[\'width\']);\\n\\t\\t}\\n\\t\\t$log->write(\\"image tag size: $width(w) - $height(h)\\");\\n\\t\\t\\n\\t\\t\\/\\/ check if the real size bigger than in HTML then create thubnail\\n\\t\\t$real_size_of_img = getimagesize($path_img_full);\\n\\t\\t$img_src_w  = (int)$real_size_of_img[0];\\n\\t\\t$img_src_h  = (int)$real_size_of_img[1];\\n\\t\\t$log->write(\\"realsize: \\".$real_size_of_img[0].\\" - \\".$real_size_of_img[1]);\\n\\t\\t$log->write(\\"realsize_array: \\".print_r($real_size_of_img,true));\\n\\t\\t\\n\\t\\tif ($img_src_w <= $width || $img_src_h <= $height) {continue;}\\n\\t\\t\\n\\t\\t$foundImage = true; \\/\\/ if needed to add ligtbox to image\\n\\n\\t\\t$thumb_dir = MODX_BASE_PATH.$img_dir.\\"\\/\\".$thumbnail_dir.\\"\\/\\";\\n\\t\\tif ($default_thumb_path) {\\n\\t\\t\\tif (substr($default_thumb_path, -1, 1)!=\\"\\/\\") $default_thumb_path.=\\"\\/\\";\\n\\t\\t\\t$thumb_dir = MODX_BASE_PATH.$default_thumb_path;\\n\\t\\t}\\n\\t\\t$log->write(\\"Thumbnail full path: {$thumb_dir}\\");\\n\\t\\tif(!is_dir($thumb_dir)) {\\n\\t\\t\\t$log->write(\\"Thumbnail dir not exist\\");\\n\\t\\t\\tif (!mkdir($thumb_dir,0755)){\\n\\t\\t\\t\\t$log->write(\\"Thumbnail error:\\".$modx->lexicon(\'dirres_error_createdir\'));\\n\\t\\t\\t\\t\\/\\/ return $modx->error->failure($modx->lexicon(\'dirres_error_createdir\'));\\n\\t\\t\\t}\\n\\t\\t\\telse{\\n\\t\\t\\t\\t$log->write(\\"Thumbnail dir created successfull\\");\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$log->write(\\"Thumbnail dir already exist\\");\\n\\t\\t}\\n\\t\\t\\/\\/ $filename = $thumb_dir.$name;\\n\\t\\t$imgName = \\"{$thumb_dir}{$img_name}{$thumb_key}_w{$width}_h{$height}.{$ext}\\";\\n\\t\\t\\n\\t\\tif ($rewrite_image_on_exist or !file_exists($imgName)) {\\n\\t\\t\\t\\/\\/ old method\\n\\t\\t\\t\\/\\/ $imgName = directResize($path_img,$path,$thumb_key,$width,$height,$r,$q_jpg,$q_png);\\n\\n\\t\\t\\t\\/\\/ new method\\n\\t\\t\\t\\/\\/ \\u0441\\u043e\\u0437\\u0434\\u0430\\u0435\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 phpThumb..\\n\\t\\t\\t$phpThumb = new phpThumb();\\n\\t\\t\\t$phpThumb->setSourceFilename($path_img_full);\\n\\t\\t\\tif (empty($config_default[\'f\'])){\\n\\t\\t\\t\\t$config_default[\'f\']=$ext; \\/\\/ \\u0431\\u0435\\u0437 \\u044d\\u0442\\u043e\\u0433\\u043e \\u043c\\u044b \\u043d\\u0435 \\u0443\\u0432\\u0438\\u0434\\u0438\\u043c \\u043f\\u0440\\u043e\\u0437\\u0440\\u0430\\u0447\\u043d\\u043e\\u0441\\u0442\\u0438 \\u0432 png \\u0438 gif\\n\\t\\t\\t}\\n\\t\\t\\tif (!empty($config_default)){\\n\\t\\t\\t\\t$config_default[\'h\']=$height;\\n\\t\\t\\t\\t$config_default[\'w\']=$width;\\n\\t\\t\\t\\t$log->write(\\"setParameter:  {$config_default_thumb_param}\\");\\n\\t\\t\\t\\t$log->write(\\"itogParameter: \\".implode(\\", \\",$config_default));\\n\\t\\t\\t\\tforeach ($config_default as $k => $v) {\\n\\t\\t\\t\\t\\t$phpThumb->setParameter($k, $v);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t   \\n\\t\\t\\t\\/\\/ \\u0433\\u0435\\u043d\\u0435\\u0440\\u0438\\u0440\\u0443\\u0435\\u043c \\u0444\\u0430\\u0439\\u043b\\n\\t\\t\\tif ($phpThumb->GenerateThumbnail()) {\\n\\t\\t\\t\\t$log->write(\\"GenerateThumbnail - OK\\");\\n\\t\\t\\t\\tif ($phpThumb->RenderToFile($imgName)) {\\n\\t\\t\\t\\t\\t$log->write(\\"RenderToFile - OK\\");\\n\\t\\t\\t\\t\\t\\/\\/ \\u0443\\u0441\\u0442\\u0430\\u043d\\u0430\\u0432\\u043b\\u0438\\u0432\\u0430\\u0435\\u043c \\u043f\\u0440\\u0430\\u0432\\u0430 \\u043d\\u0430 \\u0444\\u0430\\u0439\\u043b, \\u044d\\u0442\\u043e \\u043e\\u043f\\u0446\\u0438\\u043e\\u043d\\u0430\\u043b\\u044c\\u043d\\u043e, \\u0437\\u0430\\u0432\\u0438\\u0441\\u0438\\u0442 \\u043e\\u0442 \\u0441\\u0435\\u0440\\u0432\\u0435\\u0440\\u0430\\n\\t\\t\\t\\t\\tchmod($imgName, 0666);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t$log->write(\\"Error: RenderToFile: $imgName\\");\\n\\t\\t\\t\\t\\tcontinue;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\t$log->write(\\"Error: GenerateThumbnail\\");\\n\\t\\t\\t\\tcontinue;\\n\\t\\t\\t}\\t\\t\\n\\t\\t}\\n\\t\\t\\/\\/ \\u0432\\u043e\\u0437\\u0432\\u0440\\u0430\\u0449\\u0430\\u0435\\u043c \\u043d\\u043e\\u0440\\u043c\\u0430\\u043b\\u044c\\u043d\\u044b\\u0439 \\u043f\\u0443\\u0442\\u044c \\u043a \\u0444\\u0430\\u0439\\u043b\\u0443 \\u0447\\u0442\\u043e\\u0431\\u044b \\u043c\\u043e\\u0436\\u043d\\u043e \\u0431\\u044b\\u043b\\u043e \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0442\\u044c \\u0435\\u0433\\u043e \\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044e\\n\\t\\t$imgName=str_replace(MODX_BASE_PATH, \'\', $imgName);\\n\\t\\t$log->write(\\"Itog thumb filename: $imgName\\");\\n\\t\\t\\/\\/-------------------\\n\\t\\t\\/\\/ \\u0432 \\u044d\\u0442\\u043e\\u0439 \\u0441\\u0442\\u0440\\u043e\\u043a\\u0435 \\u043f\\u0440\\u043e\\u0438\\u0441\\u0445\\u043e\\u0434\\u0438\\u0442 \\u0437\\u0430\\u043c\\u0435\\u043d\\u0430 \\u043d\\u0430\\u0447\\u0438\\u043d\\u043a\\u0438 src \\u043d\\u0430 \\u043d\\u043e\\u0432\\u0443\\u044e \\u0443\\u0436\\u0430\\u0442\\u0443\\u044e \\u043a\\u0430\\u0440\\u0442\\u0438\\u043d\\u043a\\u0443\\n\\t\\t\\/\\/ $new_link = $path_g[0].$pathRedim.$path_d[0];\\n\\t\\t$log->write(\\"Replace string in output: \\n\\t\\t\\tsearch:  {$path_img}\\n\\t\\t\\treplace: {$imgName}\\n\\t\\t\\tsubject: {$imgstring}\\n\\t\\t\\");\\n\\t\\t\\n\\t\\t$new_link = str_replace($path_img,$imgName,$imgstring);\\n\\n\\t\\t###############################\\n\\t\\t\\/\\/ \\u043d\\u0435\\u043f\\u043e\\u043d\\u044f\\u0442\\u043d\\u0430\\u044f \\u0441\\u0442\\u0440\\u043e\\u043a\\u0430 \\u0440\\u0430\\u0437\\u043e\\u0431\\u0440\\u0430\\u0442\\u044c\\u0441\\u044f \\u0438 \\u0447\\u0442\\u043e \\u0437\\u0430 verif_light\\n\\t\\t\\/\\/ preg_match(\\"\\/directresize2\\/\\",strtolower($imgstring),$verif_light);\\n\\t\\t\\/\\/ if ($lightbox == 1 && $verif_light[0] == \\"directresize\\") {\\n\\t\\t\\/\\/ if ($lightbox) {\\n\\t\\t\\/\\/ create the expanded image legend from the title and alt tags, for colorbox and prettyPhoto\\n\\t\\t$log->write(\\"Create the legend for $expander\\");\\n\\n\\t\\tif ($alt <> \\"\\" || $title <> \\"\\") {\\n\\t\\t\\t$legende = \\" title=\\\\\\"$alt\\";\\n\\t\\t\\tif ($alt <> \\"\\" && $title <> \\"\\") $legende .= \\"<br \\/>\\";\\n\\t\\t\\tif ($title <> \\"\\") $legende .= \\"<span style=\'font-weight:normal; font-size: 9px\'>$title<\\/span>\\";\\n\\t\\t\\t$legende .= \\"\\\\\\" \\";\\n\\t\\t} else {\\n\\t\\t\\t$legende = \\"\\";\\n\\t\\t}\\n\\t\\t\\/\\/ work out if the caption is large enough to go into the right hand panel\\n\\t\\tif ($largeCaption > 0 && ( strlen($title) > $largeCaption || strlen($alt) > $largeCaption )) {\\n\\t\\t\\t$override = \', { captionOverlay: { position: \\\\\'rightpanel\\\\\', width: \\\\\'250px\\\\\' } }\';\\n\\t\\t} else {\\n\\t\\t\\t$override = \'\';\\n\\t\\t}\\n\\n\\t\\t\\n\\t\\t\\/\\/ select which expander to apply to the graphical element\\n\\t\\tswitch ($expander) {\\n\\t\\t\\tcase \\"fancybox2\\" :\\n\\t\\t\\t\\t$group=\\"\\";\\tif ($fb2_autoPlay==\'true\') $group=\\"rel=\'group\'\\";\\n\\t\\t\\t\\t$new_link = \\"<a class=\'fancybox2\' {$group} \\".$legende.\\" href=\'\\".$path_img.\\"\' >\\".$new_link.\\"<\\/a>\\";\\n\\t\\t\\t\\tbreak;\\t\\t\\n\\t\\t\\tcase \\"colorbox\\" :\\n\\t\\t\\t\\t$new_link = \\"<a class=\'colorbox cboxElement\' \\".$legende.\\" href=\'\\".$path_img.\\"\' >\\".$new_link.\\"<\\/a>\\";\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\tcase \\"prettyphoto\\" :\\n\\t\\t\\t\\t$new_link = \\"<a rel=\'prettyPhoto[[pp_gal]]\' \\".$legende.\\" href=\'\\".$path_img.\\"\' >\\".$new_link.\\"<\\/a>\\";\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\tdefault : \\/\\/use highslide as the default\\n\\t\\t\\t\\t$new_link = \\"<a class=\'highslide\' onclick=\\\\\\"return hs.expand(this\\".$override.\\")\\\\\\" href=\'\\".$path_img.\\"\' >\\".$new_link.\\"<\\/a>\\";\\n\\t\\t}\\n\\t\\t\\/\\/ } \\/\\/ end lightbox highslide test\\n\\t\\t$log->write(\\"Replace in output:\\n\\t\\t\\tImageString: {$imgstring}\\n\\t\\t\\tNewLink:     {$new_link}\\n\\t\\t\\");\\n\\n\\t\\t$o = str_replace($imgstring,$new_link,$o);\\n\\t} \\/\\/ end path_base test\\n} \\/\\/ end for loop\\n\\n\\/\\/ only add style sheet and javascript if there is an image to resize\\nif ( $insert_expander and $foundImage ) {\\n\\t\\/\\/ select which expander style sheet and java script is required\\n\\tswitch ($expander) {\\n\\t\\tcase \\"fancybox2\\" :\\n\\t\\t\\t$drStyle = \\"\\n\\t\\t\\t\\t<link rel=\'stylesheet\' type=\'text\\/css\' href=\'assets\\/components\\/directresize2\\/fancybox2\\/jquery.fancybox.css?v=2.1.4\' media=\'screen\' \\/>\\\\n\\n\\t\\t\\t\\t<link rel=\'stylesheet\' type=\'text\\/css\' href=\'assets\\/components\\/directresize2\\/fancybox2\\/helpers\\/jquery.fancybox-buttons.css?v=1.0.5\' media=\'screen\' \\/>\\\\n\\n\\t\\t\\t\\t<link rel=\'stylesheet\' type=\'text\\/css\' href=\'assets\\/components\\/directresize2\\/fancybox2\\/helpers\\/jquery.fancybox-thumbs.css?v=1.0.7\' \\/>\\\\n\\n\\t\\t\\t\\";\\n\\t\\t\\t$jsCall =  \\"\\n\\t\\t\\t\\t<script type=\'text\\/javascript\' src=\'http:\\/\\/ajax.googleapis.com\\/ajax\\/libs\\/jquery\\/1.9.0\\/jquery.min.js\'><\\/script>\\n\\t\\t\\t\\t<script type=\'text\\/javascript\' src=\'assets\\/components\\/directresize2\\/fancybox2\\/jquery.mousewheel-3.0.6.pack.js\'><\\/script>\\n\\t\\t\\t\\t<script type=\'text\\/javascript\' src=\'assets\\/components\\/directresize2\\/fancybox2\\/jquery.fancybox.pack.js?v=2.1.4\'><\\/script>\\n\\t\\t\\t\\t<script type=\'text\\/javascript\' src=\'assets\\/components\\/directresize2\\/fancybox2\\/helpers\\/jquery.fancybox-buttons.js?v=1.0.5\'><\\/script>\\n\\t\\t\\t\\t<script type=\'text\\/javascript\' src=\'assets\\/components\\/directresize2\\/fancybox2\\/helpers\\/jquery.fancybox-thumbs.js?v=1.0.7\'><\\/script>\\n\\t\\t\\t\\t<script type=\'text\\/javascript\' src=\'assets\\/components\\/directresize2\\/fancybox2\\/helpers\\/jquery.fancybox-media.js?v=1.0.5\'><\\/script>\\n\\t\\t\\t\\";\\n\\t\\t\\t$js \\t=  \\"<script>\\n\\t\\t\\t\\t\\t\\t\\tjQuery(\'a.fancybox2\').fancybox({\\n\\t\\t\\t\\t\\t\\t\\t\\tpadding: {$fb2_padding},\\n\\n\\t\\t\\t\\t\\t\\t\\t\\tminWidth: {$lightbox_w_min},\\n\\t\\t\\t\\t\\t\\t\\t\\tminHeight: {$lightbox_h_min},\\n\\n\\t\\t\\t\\t\\t\\t\\t\\tmaxWidth: {$lightbox_w},\\n\\t\\t\\t\\t\\t\\t\\t\\tmaxHeight: {$lightbox_h},\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\tautoPlay: {$fb2_autoPlay},\\n\\t\\t\\t\\t\\t\\t\\t\\tplaySpeed: {$fb2_playSpeed},\\n\\n\\t\\t\\t\\t\\t\\t\\t\\topenEffect : \'{$fb2_openEffect}\',\\n\\t\\t\\t\\t\\t\\t\\t\\topenSpeed  : {$fb2_openSpeed},\\n\\n\\t\\t\\t\\t\\t\\t\\t\\tcloseEffect : \'{$fb2_closeEffect}\',\\n\\t\\t\\t\\t\\t\\t\\t\\tcloseSpeed  : {$fb2_closeSpeed},\\n\\n\\t\\t\\t\\t\\t\\t\\t\\tcloseClick : {$fb2_closeClick},\\n\\n\\t\\t\\t\\t\\t\\t\\t\\thelpers : {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\toverlay : null\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t<\\/script>\\\\n\\";\\n\\t\\tbreak;\\t\\n\\t\\tcase \\"colorbox\\" :\\n\\t\\t\\t$drStyle = \\"<link rel=\'stylesheet\' type=\'text\\/css\' href=\'assets\\/components\\/directresize2\\/colorbox\\/\\".$cb_style.\\"\\/colorbox.css\' \\/>\\\\n\\";\\n\\t\\t\\t$jsCall =  \\"<script type=\'text\\/javascript\' src=\'http:\\/\\/ajax.googleapis.com\\/ajax\\/libs\\/jquery\\/1.7.1\\/jquery.min.js\'><\\/script>\\n\\t\\t\\t\\t\\t\\t<script type=\'text\\/javascript\' src=\'assets\\/components\\/directresize2\\/js\\/jquery.colorbox-min.js\'><\\/script>\\";\\n\\t\\t\\t$js \\t=  \\"<script>\\n\\t\\t\\t\\t\\t\\t\\tjQuery(\'a.colorbox\').colorbox({\\n\\t\\t\\t\\t\\t\\t\\t\\trel:\'colorbox\',\\n\\t\\t\\t\\t\\t\\t\\t\\topacity:\\".$opacity.\\",\\n\\t\\t\\t\\t\\t\\t\\t\\ttransition:\'\\".$cb_transition.\\"\',\\n\\t\\t\\t\\t\\t\\t\\t\\tslideshow:\\".$slideshow.\\",\\n\\t\\t\\t\\t\\t\\t\\t\\tslideshowSpeed:\\".$duration.\\",\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\tinitialWidth: {$lightbox_w_min},\\n\\t\\t\\t\\t\\t\\t\\t\\tinitialHeight: {$lightbox_h_min},\\n\\n\\t\\t\\t\\t\\t\\t\\t\\tmaxWidth:\\".$lightbox_w.\\",\\n\\t\\t\\t\\t\\t\\t\\t\\tmaxHeight:\\".$lightbox_w.\\"});\\n\\t\\t\\t\\t\\t\\t<\\/script>\\\\n\\";\\n\\t\\tbreak;\\n\\n\\t\\tcase \\"prettyphoto\\" :\\n\\t\\t\\t$drStyle = \\"<link rel=\'stylesheet\' type=\'text\\/css\' href=\'assets\\/components\\/directresize2\\/css\\/prettyPhoto.css\' \\/>\\\\n\\";\\n\\t\\t\\t$jsCall  = \\"<script type=\'text\\/javascript\' src=\'http:\\/\\/ajax.googleapis.com\\/ajax\\/libs\\/jquery\\/1.7.1\\/jquery.min.js\'><\\/script>\\n\\t\\t\\t\\t\\t\\t<script type=\'text\\/javascript\'src=\'assets\\/components\\/directresize2\\/js\\/jquery.prettyPhoto.js\'><\\/script>\\";\\n\\t\\t\\t$js\\t\\t = \\"<script>\\n\\t\\t\\t\\t\\t\\t\\t$(document).ready(function(){\\n\\t\\t\\t\\t\\t\\t\\t$(\\\\\\"a[rel^=\'prettyPhoto\']\\\\\\").prettyPhoto({\\n\\t\\t\\t\\t\\t\\t\\t\\ttheme:\'\\".$pp_theme.\\"\',\\n\\t\\t\\t\\t\\t\\t\\t\\tdefault_width: {$lightbox_w},\\n\\t\\t\\t\\t\\t\\t\\t\\tdefault_height: {$lightbox_w},\\n\\t\\t\\t\\t\\t\\t\\t\\topacity:\\".$opacity.\\",\\n\\t\\t\\t\\t\\t\\t\\t\\tautoplay_slideshow:\\".$slideshow.\\",\\n\\t\\t\\t\\t\\t\\t\\t\\tslideshow:\\".$duration.\\"\\n\\t\\t\\t\\t\\t\\t\\t});});\\n\\t\\t\\t\\t\\t\\t<\\/script>\\\\n\\";\\n\\t\\tbreak;\\n\\t\\t\\n\\t\\tdefault :\\/\\/ default to highslide settings\\n\\t\\t\\t$drStyle = \\"<link rel=\'stylesheet\' type=\'text\\/css\' href=\'assets\\/components\\/directresize2\\/highslide\\/highslide.css\' \\/>\\\\n\\";\\n\\t\\t\\t$jsCall  = \\"<script type=\'text\\/javascript\' src=\'assets\\/components\\/directresize2\\/js\\/highslide-with-gallery.min.js\'><\\/script>\\";\\n\\t\\t\\t$js\\t\\t = \\"<script type=\'text\\/javascript\'>\\n\\t\\t\\t\\t\\t\\t\\ths.graphicsDir = \'assets\\/components\\/directresize2\\/highslide\\/graphics\\/\'; \\/\\/ path to the graphical elements of highslide\\n\\t\\t\\t\\t\\t\\t\\ths.outlineType = \'\\".$hs_outlineType.\\"\';\\n\\t\\t\\t\\t\\t\\t\\ths.captionEval = \'\\".$hs_captionEval.\\"\';\\n\\t\\t\\t\\t\\t\\t\\ths.captionOverlay.position = \'\\".$captionPosition.\\"\';\\n\\t\\t\\t\\t\\t\\t\\ths.dimmingOpacity = \\".$opacity.\\";\\n\\t\\t\\t\\t\\t\\t\\ths.numberPosition = \'caption\';\\n\\t\\t\\t\\t\\t\\t\\ths.lang.number = \'Image %1 of %2\';\\n\\t\\t\\t\\t\\t\\t\\ths.minWidth = {$lightbox_w_min};\\n\\t\\t\\t\\t\\t\\t\\ths.minHeight = {$lightbox_h_min};\\n\\t\\t\\t\\t\\t\\t\\ths.maxWidth = \'\\".$lightbox_w.\\"\';\\n\\t\\t\\t\\t\\t\\t\\ths.maxHeight = \'\\".$lightbox_h.\\"\';\\n\\t\\t\\t\\t\\t\\t\\ths.lang.creditsText = \'\\".$hs_credit.\\"\';\\n\\t\\t\\t\\t\\t\\t<\\/script>\\\\n\\";\\n\\t\\t\\tif ( $slideshow == \'true\' ) {\\n\\t\\t\\t\\t$js = $js.\\"\\n\\t\\t\\t\\t\\t\\t<script type=\'text\\/javascript\'>\\n\\t\\t\\t\\t\\t\\t\\ths.addSlideshow({\\n\\t\\t\\t\\t\\t\\t\\t\\tinterval: \\".$duration.\\",\\n\\t\\t\\t\\t\\t\\t\\t\\trepeat: false,\\n\\t\\t\\t\\t\\t\\t\\t\\tuseControls: true,\\n\\t\\t\\t\\t\\t\\t\\t\\tfixedControls: true,\\n\\t\\t\\t\\t\\t\\t\\t\\toverlayOptions: {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\topacity: \\".$opacity.\\",\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tposition: \'top center\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\thideOnMouseOut: true,\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t<\\/script>\\\\n\\";\\n\\t\\t\\t}\\n\\t\\tbreak;\\n\\t}\\n\\t\\n\\tif ($insert_expander_css){\\n\\t\\t$log->write(\\"Insert expander css\\");\\n\\n\\t\\t\\/\\/ add the style sheet to the head of the html file\\n\\t\\t$o = preg_replace(\'~(<\\/head>)~i\', $drStyle . \'\\\\1\', $o);\\n\\t}\\n\\tif ($insert_expander_js){ $js=$jsCall.$js;}\\n\\t$log->write(\\"Insert expander JS\\"); \\n\\t\\/\\/ add the javascript to the bottom of the page \\n\\t$o = preg_replace(\'~(<\\/body>)~i\', $js . \'\\\\1\', $o);\\n\\t\\n}\\nreturn;"}',
        'guid' => 'd6317c4d3dd6e76db8760fc611c4a95a',
        'native_key' => 1,
        'signature' => '8f4e7323d27ab3d8f367eea4a7f5a94e',
      ),
    ),
  ),
  'related_object_attributes' => 
  array (
    'Snippets' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'Chunks' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'Plugins' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
      'related_objects' => true,
      'related_object_attributes' => 
      array (
        'PluginEvents' => 
        array (
          'preserve_keys' => true,
          'update_object' => false,
          'unique_key' => 
          array (
            0 => 'pluginid',
            1 => 'event',
          ),
        ),
      ),
    ),
  ),
  'namespace' => 'directresize2',
  'resolve' => 
  array (
    0 => 
    array (
      'type' => 'file',
      'body' => '{"source":"directresize2-1.1.4-rc1\\/modCategory\\/28930b4ea7cf65af1b289658ecdb4adb\\/0\\/","target":"return MODX_ASSETS_PATH.\'components\\/\';","name":"directresize2"}',
    ),
    1 => 
    array (
      'type' => 'file',
      'body' => '{"source":"directresize2-1.1.4-rc1\\/modCategory\\/28930b4ea7cf65af1b289658ecdb4adb\\/1\\/","target":"return MODX_CORE_PATH.\'components\\/\';","name":"directresize2"}',
    ),
  ),
  'validate' => NULL,
  'vehicle_package' => 'transport',
  'vehicle_class' => 'xPDOObjectVehicle',
  'guid' => '8af24f5791ade9c52fe900549469ca09',
  'package' => 'modx',
  'class' => 'modCategory',
  'signature' => '28930b4ea7cf65af1b289658ecdb4adb',
  'native_key' => 1,
  'object' => '{"id":1,"parent":0,"category":"DirectResize2"}',
);